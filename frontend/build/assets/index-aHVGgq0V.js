const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ContentPlanner-BMtfZzbk.js","assets/ui-4vzYMC9E.js","assets/vendor-BNoTEEtH.js","assets/textarea-UnZn7Vo0.js","assets/select-IoDiSNrm.js","assets/target-CaijnCAg.js","assets/brain-ca3jX_He.js","assets/utils-CYC2HZ_g.js","assets/ScriptGenerator-HlTHQZSv.js","assets/volume-2-B7jLbdTk.js","assets/download-mfKfPaqZ.js","assets/VoiceStudio-BONGjn8x.js","assets/file-audio-ddJsRmoG.js","assets/VideoAssembly-CgMVKs69.js","assets/AnalyticsDashboard-3dXYJRjh.js","assets/AutomationConfig-CfCg1zDo.js"])))=>i.map(i=>d[i]);
var Sc=Object.defineProperty;var aa=r=>{throw TypeError(r)};var jc=(r,e,t)=>e in r?Sc(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var jt=(r,e,t)=>jc(r,typeof e!="symbol"?e+"":e,t),Hs=(r,e,t)=>e.has(r)||aa("Cannot "+t);var _=(r,e,t)=>(Hs(r,e,"read from private field"),t?t.call(r):e.get(r)),G=(r,e,t)=>e.has(r)?aa("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),M=(r,e,t,s)=>(Hs(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t),ve=(r,e,t)=>(Hs(r,e,"access private method"),t);var Qr=(r,e,t,s)=>({set _(n){M(r,e,n,t)},get _(){return _(r,e,s)}});import{j as d,P as Te,c as Cc,a as On,u as xs,B as Pc,b as ii,d as Nn,e as ls,f as me,R as Rc,g as Ac,h as Oc,i as Nc,k as oi,A as Ic,D as $c,C as Lc,S as Dc,l as Mc,m as Uc,n as ci,o as Fc,p as Bc,q as Vc,I as qc}from"./ui-4vzYMC9E.js";import{a as li,r as m,R as S,b as zc,c as Zc,g as Hc,d as Le}from"./vendor-BNoTEEtH.js";import{t as Kc,c as Gc,a as ks}from"./utils-CYC2HZ_g.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();var ui,ia=li;ui=ia.createRoot,ia.hydrateRoot;const Wc=1,Jc=1e6;let Ks=0;function Qc(){return Ks=(Ks+1)%Number.MAX_SAFE_INTEGER,Ks.toString()}const Gs=new Map,oa=r=>{if(Gs.has(r))return;const e=setTimeout(()=>{Gs.delete(r),kr({type:"REMOVE_TOAST",toastId:r})},Jc);Gs.set(r,e)},Yc=(r,e)=>{switch(e.type){case"ADD_TOAST":return{...r,toasts:[e.toast,...r.toasts].slice(0,Wc)};case"UPDATE_TOAST":return{...r,toasts:r.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?oa(t):r.toasts.forEach(s=>{oa(s.id)}),{...r,toasts:r.toasts.map(s=>s.id===t||t===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(t=>t.id!==e.toastId)}}},as=[];let is={toasts:[]};function kr(r){is=Yc(is,r),as.forEach(e=>{e(is)})}function Xc({...r}){const e=Qc(),t=n=>kr({type:"UPDATE_TOAST",toast:{...n,id:e}}),s=()=>kr({type:"DISMISS_TOAST",toastId:e});return kr({type:"ADD_TOAST",toast:{...r,id:e,open:!0,onOpenChange:n=>{n||s()}}}),{id:e,dismiss:s,update:t}}function el(){const[r,e]=m.useState(is);return m.useEffect(()=>(as.push(e),()=>{const t=as.indexOf(e);t>-1&&as.splice(t,1)}),[r]),{...r,toast:Xc,dismiss:t=>kr({type:"DISMISS_TOAST",toastId:t})}}var tl="VisuallyHidden",Ts=m.forwardRef((r,e)=>d.jsx(Te.span,{...r,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...r.style}}));Ts.displayName=tl;var rl=Ts,In="ToastProvider",[$n,sl,nl]=Cc("Toast"),[di,fg]=On("Toast",[nl]),[al,Es]=di(In),hi=r=>{const{__scopeToast:e,label:t="Notification",duration:s=5e3,swipeDirection:n="right",swipeThreshold:a=50,children:i}=r,[o,c]=m.useState(null),[l,u]=m.useState(0),f=m.useRef(!1),h=m.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${In}\`. Expected non-empty \`string\`.`),d.jsx($n.Provider,{scope:e,children:d.jsx(al,{scope:e,label:t,duration:s,swipeDirection:n,swipeThreshold:a,toastCount:l,viewport:o,onViewportChange:c,onToastAdd:m.useCallback(()=>u(v=>v+1),[]),onToastRemove:m.useCallback(()=>u(v=>v-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:i})})};hi.displayName=In;var fi="ToastViewport",il=["F8"],nn="toast.viewportPause",an="toast.viewportResume",pi=m.forwardRef((r,e)=>{const{__scopeToast:t,hotkey:s=il,label:n="Notifications ({hotkey})",...a}=r,i=Es(fi,t),o=sl(t),c=m.useRef(null),l=m.useRef(null),u=m.useRef(null),f=m.useRef(null),h=xs(e,f,i.onViewportChange),v=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=i.toastCount>0;m.useEffect(()=>{const p=y=>{var x;s.length!==0&&s.every(T=>y[T]||y.code===T)&&((x=f.current)==null||x.focus())};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[s]),m.useEffect(()=>{const p=c.current,y=f.current;if(w&&p&&y){const b=()=>{if(!i.isClosePausedRef.current){const V=new CustomEvent(nn);y.dispatchEvent(V),i.isClosePausedRef.current=!0}},x=()=>{if(i.isClosePausedRef.current){const V=new CustomEvent(an);y.dispatchEvent(V),i.isClosePausedRef.current=!1}},T=V=>{!p.contains(V.relatedTarget)&&x()},E=()=>{p.contains(document.activeElement)||x()};return p.addEventListener("focusin",b),p.addEventListener("focusout",T),p.addEventListener("pointermove",b),p.addEventListener("pointerleave",E),window.addEventListener("blur",b),window.addEventListener("focus",x),()=>{p.removeEventListener("focusin",b),p.removeEventListener("focusout",T),p.removeEventListener("pointermove",b),p.removeEventListener("pointerleave",E),window.removeEventListener("blur",b),window.removeEventListener("focus",x)}}},[w,i.isClosePausedRef]);const g=m.useCallback(({tabbingDirection:p})=>{const b=o().map(x=>{const T=x.ref.current,E=[T,...wl(T)];return p==="forwards"?E:E.reverse()});return(p==="forwards"?b.reverse():b).flat()},[o]);return m.useEffect(()=>{const p=f.current;if(p){const y=b=>{var E,V,de;const x=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!x){const K=document.activeElement,ue=b.shiftKey;if(b.target===p&&ue){(E=l.current)==null||E.focus();return}const se=g({tabbingDirection:ue?"backwards":"forwards"}),he=se.findIndex(C=>C===K);Ws(se.slice(he+1))?b.preventDefault():ue?(V=l.current)==null||V.focus():(de=u.current)==null||de.focus()}};return p.addEventListener("keydown",y),()=>p.removeEventListener("keydown",y)}},[o,g]),d.jsxs(Pc,{ref:c,role:"region","aria-label":n.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&d.jsx(on,{ref:l,onFocusFromOutsideViewport:()=>{const p=g({tabbingDirection:"forwards"});Ws(p)}}),d.jsx($n.Slot,{scope:t,children:d.jsx(Te.ol,{tabIndex:-1,...a,ref:h})}),w&&d.jsx(on,{ref:u,onFocusFromOutsideViewport:()=>{const p=g({tabbingDirection:"backwards"});Ws(p)}})]})});pi.displayName=fi;var mi="ToastFocusProxy",on=m.forwardRef((r,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:s,...n}=r,a=Es(mi,t);return d.jsx(Ts,{"aria-hidden":!0,tabIndex:0,...n,ref:e,style:{position:"fixed"},onFocus:i=>{var l;const o=i.relatedTarget;!((l=a.viewport)!=null&&l.contains(o))&&s()}})});on.displayName=mi;var Ss="Toast",ol="toast.swipeStart",cl="toast.swipeMove",ll="toast.swipeCancel",ul="toast.swipeEnd",gi=m.forwardRef((r,e)=>{const{forceMount:t,open:s,defaultOpen:n,onOpenChange:a,...i}=r,[o=!0,c]=ii({prop:s,defaultProp:n,onChange:a});return d.jsx(Nn,{present:t||o,children:d.jsx(fl,{open:o,...i,ref:e,onClose:()=>c(!1),onPause:ls(r.onPause),onResume:ls(r.onResume),onSwipeStart:me(r.onSwipeStart,l=>{l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:me(r.onSwipeMove,l=>{const{x:u,y:f}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","move"),l.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:me(r.onSwipeCancel,l=>{l.currentTarget.setAttribute("data-swipe","cancel"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:me(r.onSwipeEnd,l=>{const{x:u,y:f}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","end"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});gi.displayName=Ss;var[dl,hl]=di(Ss,{onClose(){}}),fl=m.forwardRef((r,e)=>{const{__scopeToast:t,type:s="foreground",duration:n,open:a,onClose:i,onEscapeKeyDown:o,onPause:c,onResume:l,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:v,...w}=r,g=Es(Ss,t),[p,y]=m.useState(null),b=xs(e,C=>y(C)),x=m.useRef(null),T=m.useRef(null),E=n||g.duration,V=m.useRef(0),de=m.useRef(E),K=m.useRef(0),{onToastAdd:ue,onToastRemove:O}=g,R=ls(()=>{var q;(p==null?void 0:p.contains(document.activeElement))&&((q=g.viewport)==null||q.focus()),i()}),se=m.useCallback(C=>{!C||C===1/0||(window.clearTimeout(K.current),V.current=new Date().getTime(),K.current=window.setTimeout(R,C))},[R]);m.useEffect(()=>{const C=g.viewport;if(C){const q=()=>{se(de.current),l==null||l()},W=()=>{const ne=new Date().getTime()-V.current;de.current=de.current-ne,window.clearTimeout(K.current),c==null||c()};return C.addEventListener(nn,W),C.addEventListener(an,q),()=>{C.removeEventListener(nn,W),C.removeEventListener(an,q)}}},[g.viewport,E,c,l,se]),m.useEffect(()=>{a&&!g.isClosePausedRef.current&&se(E)},[a,E,g.isClosePausedRef,se]),m.useEffect(()=>(ue(),()=>O()),[ue,O]);const he=m.useMemo(()=>p?ki(p):null,[p]);return g.viewport?d.jsxs(d.Fragment,{children:[he&&d.jsx(pl,{__scopeToast:t,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:he}),d.jsx(dl,{scope:t,onClose:R,children:li.createPortal(d.jsx($n.ItemSlot,{scope:t,children:d.jsx(Rc,{asChild:!0,onEscapeKeyDown:me(o,()=>{g.isFocusedToastEscapeKeyDownRef.current||R(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:d.jsx(Te.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...w,ref:b,style:{userSelect:"none",touchAction:"none",...r.style},onKeyDown:me(r.onKeyDown,C=>{C.key==="Escape"&&(o==null||o(C.nativeEvent),C.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:me(r.onPointerDown,C=>{C.button===0&&(x.current={x:C.clientX,y:C.clientY})}),onPointerMove:me(r.onPointerMove,C=>{if(!x.current)return;const q=C.clientX-x.current.x,W=C.clientY-x.current.y,ne=!!T.current,F=["left","right"].includes(g.swipeDirection),ee=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,Ce=F?ee(0,q):0,Y=F?0:ee(0,W),J=C.pointerType==="touch"?10:2,X={x:Ce,y:Y},Pe={originalEvent:C,delta:X};ne?(T.current=X,Yr(cl,f,Pe,{discrete:!1})):ca(X,g.swipeDirection,J)?(T.current=X,Yr(ol,u,Pe,{discrete:!1}),C.target.setPointerCapture(C.pointerId)):(Math.abs(q)>J||Math.abs(W)>J)&&(x.current=null)}),onPointerUp:me(r.onPointerUp,C=>{const q=T.current,W=C.target;if(W.hasPointerCapture(C.pointerId)&&W.releasePointerCapture(C.pointerId),T.current=null,x.current=null,q){const ne=C.currentTarget,F={originalEvent:C,delta:q};ca(q,g.swipeDirection,g.swipeThreshold)?Yr(ul,v,F,{discrete:!0}):Yr(ll,h,F,{discrete:!0}),ne.addEventListener("click",ee=>ee.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),pl=r=>{const{__scopeToast:e,children:t,...s}=r,n=Es(Ss,e),[a,i]=m.useState(!1),[o,c]=m.useState(!1);return vl(()=>i(!0)),m.useEffect(()=>{const l=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(l)},[]),o?null:d.jsx(Ac,{asChild:!0,children:d.jsx(Ts,{...s,children:a&&d.jsxs(d.Fragment,{children:[n.label," ",t]})})})},ml="ToastTitle",vi=m.forwardRef((r,e)=>{const{__scopeToast:t,...s}=r;return d.jsx(Te.div,{...s,ref:e})});vi.displayName=ml;var gl="ToastDescription",yi=m.forwardRef((r,e)=>{const{__scopeToast:t,...s}=r;return d.jsx(Te.div,{...s,ref:e})});yi.displayName=gl;var wi="ToastAction",bi=m.forwardRef((r,e)=>{const{altText:t,...s}=r;return t.trim()?d.jsx(xi,{altText:t,asChild:!0,children:d.jsx(Ln,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${wi}\`. Expected non-empty \`string\`.`),null)});bi.displayName=wi;var _i="ToastClose",Ln=m.forwardRef((r,e)=>{const{__scopeToast:t,...s}=r,n=hl(_i,t);return d.jsx(xi,{asChild:!0,children:d.jsx(Te.button,{type:"button",...s,ref:e,onClick:me(r.onClick,n.onClose)})})});Ln.displayName=_i;var xi=m.forwardRef((r,e)=>{const{__scopeToast:t,altText:s,...n}=r;return d.jsx(Te.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...n,ref:e})});function ki(r){const e=[];return Array.from(r.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),yl(s)){const n=s.ariaHidden||s.hidden||s.style.display==="none",a=s.dataset.radixToastAnnounceExclude==="";if(!n)if(a){const i=s.dataset.radixToastAnnounceAlt;i&&e.push(i)}else e.push(...ki(s))}}),e}function Yr(r,e,t,{discrete:s}){const n=t.originalEvent.currentTarget,a=new CustomEvent(r,{bubbles:!0,cancelable:!0,detail:t});e&&n.addEventListener(r,e,{once:!0}),s?Nc(n,a):n.dispatchEvent(a)}var ca=(r,e,t=0)=>{const s=Math.abs(r.x),n=Math.abs(r.y),a=s>n;return e==="left"||e==="right"?a&&s>t:!a&&n>t};function vl(r=()=>{}){const e=ls(r);Oc(()=>{let t=0,s=0;return t=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(s)}},[e])}function yl(r){return r.nodeType===r.ELEMENT_NODE}function wl(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const n=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||n?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Ws(r){const e=document.activeElement;return r.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var bl=hi,Ti=pi,Ei=gi,Si=vi,ji=yi,Ci=bi,Pi=Ln;/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ri=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xl={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=m.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:n="",children:a,iconNode:i,...o},c)=>m.createElement("svg",{ref:c,...xl,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:Ri("lucide",n),...o},[...i.map(([l,u])=>m.createElement(l,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=(r,e)=>{const t=m.forwardRef(({className:s,...n},a)=>m.createElement(kl,{ref:a,iconNode:e,className:Ri(`lucide-${_l(r)}`,s),...n}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=ce("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=ce("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=ce("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=ce("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=ce("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=ce("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=ce("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=ce("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=ce("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=ce("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=ce("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=ce("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=ce("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function le(...r){return Kc(Gc(r))}const Fl=bl,Ni=m.forwardRef(({className:r,...e},t)=>d.jsx(Ti,{ref:t,className:le("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...e}));Ni.displayName=Ti.displayName;const Bl=ks("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ii=m.forwardRef(({className:r,variant:e,...t},s)=>d.jsx(Ei,{ref:s,className:le(Bl({variant:e}),r),...t}));Ii.displayName=Ei.displayName;const Vl=m.forwardRef(({className:r,...e},t)=>d.jsx(Ci,{ref:t,className:le("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...e}));Vl.displayName=Ci.displayName;const $i=m.forwardRef(({className:r,...e},t)=>d.jsx(Pi,{ref:t,className:le("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...e,children:d.jsx(Ul,{className:"h-4 w-4"})}));$i.displayName=Pi.displayName;const Li=m.forwardRef(({className:r,...e},t)=>d.jsx(Si,{ref:t,className:le("text-sm font-semibold",r),...e}));Li.displayName=Si.displayName;const Di=m.forwardRef(({className:r,...e},t)=>d.jsx(ji,{ref:t,className:le("text-sm opacity-90",r),...e}));Di.displayName=ji.displayName;function ql(){const{toasts:r}=el();return d.jsxs(Fl,{children:[r.map(function({id:e,title:t,description:s,action:n,...a}){return d.jsxs(Ii,{...a,children:[d.jsxs("div",{className:"grid gap-1",children:[t&&d.jsx(Li,{children:t}),s&&d.jsx(Di,{children:s})]}),n,d.jsx($i,{})]},e)}),d.jsx(Ni,{})]})}var da=["light","dark"],zl="(prefers-color-scheme: dark)",Zl=m.createContext(void 0),Hl={setTheme:r=>{},themes:[]},Kl=()=>{var r;return(r=m.useContext(Zl))!=null?r:Hl};m.memo(({forcedTheme:r,storageKey:e,attribute:t,enableSystem:s,enableColorScheme:n,defaultTheme:a,value:i,attrs:o,nonce:c})=>{let l=a==="system",u=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(w=>`'${w}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,f=n?da.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(w,g=!1,p=!0)=>{let y=i?i[w]:w,b=g?w+"|| ''":`'${y}'`,x="";return n&&p&&!g&&da.includes(w)&&(x+=`d.style.colorScheme = '${w}';`),t==="class"?g||y?x+=`c.add(${b})`:x+="null":y&&(x+=`d[s](n,${b})`),x},v=r?`!function(){${u}${h(r)}}()`:s?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${l})){var t='${zl}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${h(i?"x[e]":"e",!0)}}${l?"":"else{"+h(a,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${h(i?"x[e]":"e",!0)}}else{${h(a,!1,!1)};}${f}}catch(t){}}();`;return m.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:v}})});var Gl=r=>{switch(r){case"success":return Ql;case"info":return Xl;case"warning":return Yl;case"error":return eu;default:return null}},Wl=Array(12).fill(0),Jl=({visible:r})=>S.createElement("div",{className:"sonner-loading-wrapper","data-visible":r},S.createElement("div",{className:"sonner-spinner"},Wl.map((e,t)=>S.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),Ql=S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},S.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Yl=S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},S.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Xl=S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},S.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),eu=S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},S.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),tu=()=>{let[r,e]=S.useState(document.hidden);return S.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),r},ln=1,ru=class{constructor(){this.subscribe=r=>(this.subscribers.push(r),()=>{let e=this.subscribers.indexOf(r);this.subscribers.splice(e,1)}),this.publish=r=>{this.subscribers.forEach(e=>e(r))},this.addToast=r=>{this.publish(r),this.toasts=[...this.toasts,r]},this.create=r=>{var e;let{message:t,...s}=r,n=typeof(r==null?void 0:r.id)=="number"||((e=r.id)==null?void 0:e.length)>0?r.id:ln++,a=this.toasts.find(o=>o.id===n),i=r.dismissible===void 0?!0:r.dismissible;return a?this.toasts=this.toasts.map(o=>o.id===n?(this.publish({...o,...r,id:n,title:t}),{...o,...r,id:n,dismissible:i,title:t}):o):this.addToast({title:t,...s,dismissible:i,id:n}),n},this.dismiss=r=>(r||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:r,dismiss:!0})),r),this.message=(r,e)=>this.create({...e,message:r}),this.error=(r,e)=>this.create({...e,message:r,type:"error"}),this.success=(r,e)=>this.create({...e,type:"success",message:r}),this.info=(r,e)=>this.create({...e,type:"info",message:r}),this.warning=(r,e)=>this.create({...e,type:"warning",message:r}),this.loading=(r,e)=>this.create({...e,type:"loading",message:r}),this.promise=(r,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:r,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let s=r instanceof Promise?r:r(),n=t!==void 0;return s.then(async a=>{if(nu(a)&&!a.ok){n=!1;let i=typeof e.error=="function"?await e.error(`HTTP error! status: ${a.status}`):e.error,o=typeof e.description=="function"?await e.description(`HTTP error! status: ${a.status}`):e.description;this.create({id:t,type:"error",message:i,description:o})}else if(e.success!==void 0){n=!1;let i=typeof e.success=="function"?await e.success(a):e.success,o=typeof e.description=="function"?await e.description(a):e.description;this.create({id:t,type:"success",message:i,description:o})}}).catch(async a=>{if(e.error!==void 0){n=!1;let i=typeof e.error=="function"?await e.error(a):e.error,o=typeof e.description=="function"?await e.description(a):e.description;this.create({id:t,type:"error",message:i,description:o})}}).finally(()=>{var a;n&&(this.dismiss(t),t=void 0),(a=e.finally)==null||a.call(e)}),t},this.custom=(r,e)=>{let t=(e==null?void 0:e.id)||ln++;return this.create({jsx:r(t),id:t,...e}),t},this.subscribers=[],this.toasts=[]}},Oe=new ru,su=(r,e)=>{let t=(e==null?void 0:e.id)||ln++;return Oe.addToast({title:r,...e,id:t}),t},nu=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",au=su,iu=()=>Oe.toasts,B=Object.assign(au,{success:Oe.success,info:Oe.info,warning:Oe.warning,error:Oe.error,custom:Oe.custom,message:Oe.message,promise:Oe.promise,dismiss:Oe.dismiss,loading:Oe.loading},{getHistory:iu});function ou(r,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s),s.styleSheet?s.styleSheet.cssText=r:s.appendChild(document.createTextNode(r))}ou(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Xr(r){return r.label!==void 0}var cu=3,lu="32px",uu=4e3,du=356,hu=14,fu=20,pu=200;function mu(...r){return r.filter(Boolean).join(" ")}var gu=r=>{var e,t,s,n,a,i,o,c,l,u;let{invert:f,toast:h,unstyled:v,interacting:w,setHeights:g,visibleToasts:p,heights:y,index:b,toasts:x,expanded:T,removeToast:E,defaultRichColors:V,closeButton:de,style:K,cancelButtonStyle:ue,actionButtonStyle:O,className:R="",descriptionClassName:se="",duration:he,position:C,gap:q,loadingIcon:W,expandByDefault:ne,classNames:F,icons:ee,closeButtonAriaLabel:Ce="Close toast",pauseWhenPageIsHidden:Y,cn:J}=r,[X,Pe]=S.useState(!1),[St,fe]=S.useState(!1),[Vs,pr]=S.useState(!1),[mr,gr]=S.useState(!1),[mc,qs]=S.useState(0),[gc,Yn]=S.useState(0),Xn=S.useRef(null),Ut=S.useRef(null),vc=b===0,yc=b+1<=p,Ie=h.type,Ft=h.dismissible!==!1,wc=h.className||"",bc=h.descriptionClassName||"",Wr=S.useMemo(()=>y.findIndex(L=>L.toastId===h.id)||0,[y,h.id]),_c=S.useMemo(()=>{var L;return(L=h.closeButton)!=null?L:de},[h.closeButton,de]),ea=S.useMemo(()=>h.duration||he||uu,[h.duration,he]),zs=S.useRef(0),Bt=S.useRef(0),ta=S.useRef(0),Vt=S.useRef(null),[ra,xc]=C.split("-"),sa=S.useMemo(()=>y.reduce((L,ae,te)=>te>=Wr?L:L+ae.height,0),[y,Wr]),na=tu(),kc=h.invert||f,Zs=Ie==="loading";Bt.current=S.useMemo(()=>Wr*q+sa,[Wr,sa]),S.useEffect(()=>{Pe(!0)},[]),S.useLayoutEffect(()=>{if(!X)return;let L=Ut.current,ae=L.style.height;L.style.height="auto";let te=L.getBoundingClientRect().height;L.style.height=ae,Yn(te),g(ze=>ze.find(Ze=>Ze.toastId===h.id)?ze.map(Ze=>Ze.toastId===h.id?{...Ze,height:te}:Ze):[{toastId:h.id,height:te,position:h.position},...ze])},[X,h.title,h.description,g,h.id]);let ot=S.useCallback(()=>{fe(!0),qs(Bt.current),g(L=>L.filter(ae=>ae.toastId!==h.id)),setTimeout(()=>{E(h)},pu)},[h,E,g,Bt]);S.useEffect(()=>{if(h.promise&&Ie==="loading"||h.duration===1/0||h.type==="loading")return;let L,ae=ea;return T||w||Y&&na?(()=>{if(ta.current<zs.current){let te=new Date().getTime()-zs.current;ae=ae-te}ta.current=new Date().getTime()})():ae!==1/0&&(zs.current=new Date().getTime(),L=setTimeout(()=>{var te;(te=h.onAutoClose)==null||te.call(h,h),ot()},ae)),()=>clearTimeout(L)},[T,w,ne,h,ea,ot,h.promise,Ie,Y,na]),S.useEffect(()=>{let L=Ut.current;if(L){let ae=L.getBoundingClientRect().height;return Yn(ae),g(te=>[{toastId:h.id,height:ae,position:h.position},...te]),()=>g(te=>te.filter(ze=>ze.toastId!==h.id))}},[g,h.id]),S.useEffect(()=>{h.delete&&ot()},[ot,h.delete]);function Tc(){return ee!=null&&ee.loading?S.createElement("div",{className:"sonner-loader","data-visible":Ie==="loading"},ee.loading):W?S.createElement("div",{className:"sonner-loader","data-visible":Ie==="loading"},W):S.createElement(Jl,{visible:Ie==="loading"})}return S.createElement("li",{"aria-live":h.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Ut,className:J(R,wc,F==null?void 0:F.toast,(e=h==null?void 0:h.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[Ie],(t=h==null?void 0:h.classNames)==null?void 0:t[Ie]),"data-sonner-toast":"","data-rich-colors":(s=h.richColors)!=null?s:V,"data-styled":!(h.jsx||h.unstyled||v),"data-mounted":X,"data-promise":!!h.promise,"data-removed":St,"data-visible":yc,"data-y-position":ra,"data-x-position":xc,"data-index":b,"data-front":vc,"data-swiping":Vs,"data-dismissible":Ft,"data-type":Ie,"data-invert":kc,"data-swipe-out":mr,"data-expanded":!!(T||ne&&X),style:{"--index":b,"--toasts-before":b,"--z-index":x.length-b,"--offset":`${St?mc:Bt.current}px`,"--initial-height":ne?"auto":`${gc}px`,...K,...h.style},onPointerDown:L=>{Zs||!Ft||(Xn.current=new Date,qs(Bt.current),L.target.setPointerCapture(L.pointerId),L.target.tagName!=="BUTTON"&&(pr(!0),Vt.current={x:L.clientX,y:L.clientY}))},onPointerUp:()=>{var L,ae,te,ze;if(mr||!Ft)return;Vt.current=null;let Ze=Number(((L=Ut.current)==null?void 0:L.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Jr=new Date().getTime()-((ae=Xn.current)==null?void 0:ae.getTime()),Ec=Math.abs(Ze)/Jr;if(Math.abs(Ze)>=fu||Ec>.11){qs(Bt.current),(te=h.onDismiss)==null||te.call(h,h),ot(),gr(!0);return}(ze=Ut.current)==null||ze.style.setProperty("--swipe-amount","0px"),pr(!1)},onPointerMove:L=>{var ae;if(!Vt.current||!Ft)return;let te=L.clientY-Vt.current.y,ze=L.clientX-Vt.current.x,Ze=(ra==="top"?Math.min:Math.max)(0,te),Jr=L.pointerType==="touch"?10:2;Math.abs(Ze)>Jr?(ae=Ut.current)==null||ae.style.setProperty("--swipe-amount",`${te}px`):Math.abs(ze)>Jr&&(Vt.current=null)}},_c&&!h.jsx?S.createElement("button",{"aria-label":Ce,"data-disabled":Zs,"data-close-button":!0,onClick:Zs||!Ft?()=>{}:()=>{var L;ot(),(L=h.onDismiss)==null||L.call(h,h)},className:J(F==null?void 0:F.closeButton,(n=h==null?void 0:h.classNames)==null?void 0:n.closeButton)},S.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},S.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),S.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,h.jsx||S.isValidElement(h.title)?h.jsx||h.title:S.createElement(S.Fragment,null,Ie||h.icon||h.promise?S.createElement("div",{"data-icon":"",className:J(F==null?void 0:F.icon,(a=h==null?void 0:h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Tc():null,h.type!=="loading"?h.icon||(ee==null?void 0:ee[Ie])||Gl(Ie):null):null,S.createElement("div",{"data-content":"",className:J(F==null?void 0:F.content,(i=h==null?void 0:h.classNames)==null?void 0:i.content)},S.createElement("div",{"data-title":"",className:J(F==null?void 0:F.title,(o=h==null?void 0:h.classNames)==null?void 0:o.title)},h.title),h.description?S.createElement("div",{"data-description":"",className:J(se,bc,F==null?void 0:F.description,(c=h==null?void 0:h.classNames)==null?void 0:c.description)},h.description):null),S.isValidElement(h.cancel)?h.cancel:h.cancel&&Xr(h.cancel)?S.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||ue,onClick:L=>{var ae,te;Xr(h.cancel)&&Ft&&((te=(ae=h.cancel).onClick)==null||te.call(ae,L),ot())},className:J(F==null?void 0:F.cancelButton,(l=h==null?void 0:h.classNames)==null?void 0:l.cancelButton)},h.cancel.label):null,S.isValidElement(h.action)?h.action:h.action&&Xr(h.action)?S.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||O,onClick:L=>{var ae,te;Xr(h.action)&&(L.defaultPrevented||((te=(ae=h.action).onClick)==null||te.call(ae,L),ot()))},className:J(F==null?void 0:F.actionButton,(u=h==null?void 0:h.classNames)==null?void 0:u.actionButton)},h.action.label):null))};function ha(){if(typeof window>"u"||typeof document>"u")return"ltr";let r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}var vu=r=>{let{invert:e,position:t="bottom-right",hotkey:s=["altKey","KeyT"],expand:n,closeButton:a,className:i,offset:o,theme:c="light",richColors:l,duration:u,style:f,visibleToasts:h=cu,toastOptions:v,dir:w=ha(),gap:g=hu,loadingIcon:p,icons:y,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:x,cn:T=mu}=r,[E,V]=S.useState([]),de=S.useMemo(()=>Array.from(new Set([t].concat(E.filter(Y=>Y.position).map(Y=>Y.position)))),[E,t]),[K,ue]=S.useState([]),[O,R]=S.useState(!1),[se,he]=S.useState(!1),[C,q]=S.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),W=S.useRef(null),ne=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=S.useRef(null),ee=S.useRef(!1),Ce=S.useCallback(Y=>{var J;(J=E.find(X=>X.id===Y.id))!=null&&J.delete||Oe.dismiss(Y.id),V(X=>X.filter(({id:Pe})=>Pe!==Y.id))},[E]);return S.useEffect(()=>Oe.subscribe(Y=>{if(Y.dismiss){V(J=>J.map(X=>X.id===Y.id?{...X,delete:!0}:X));return}setTimeout(()=>{zc.flushSync(()=>{V(J=>{let X=J.findIndex(Pe=>Pe.id===Y.id);return X!==-1?[...J.slice(0,X),{...J[X],...Y},...J.slice(X+1)]:[Y,...J]})})})}),[]),S.useEffect(()=>{if(c!=="system"){q(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?q("dark"):q("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:Y})=>{q(Y?"dark":"light")})},[c]),S.useEffect(()=>{E.length<=1&&R(!1)},[E]),S.useEffect(()=>{let Y=J=>{var X,Pe;s.every(St=>J[St]||J.code===St)&&(R(!0),(X=W.current)==null||X.focus()),J.code==="Escape"&&(document.activeElement===W.current||(Pe=W.current)!=null&&Pe.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[s]),S.useEffect(()=>{if(W.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,ee.current=!1)}},[W.current]),E.length?S.createElement("section",{"aria-label":`${b} ${ne}`,tabIndex:-1},de.map((Y,J)=>{var X;let[Pe,St]=Y.split("-");return S.createElement("ol",{key:Y,dir:w==="auto"?ha():w,tabIndex:-1,ref:W,className:i,"data-sonner-toaster":!0,"data-theme":C,"data-y-position":Pe,"data-x-position":St,style:{"--front-toast-height":`${((X=K[0])==null?void 0:X.height)||0}px`,"--offset":typeof o=="number"?`${o}px`:o||lu,"--width":`${du}px`,"--gap":`${g}px`,...f},onBlur:fe=>{ee.current&&!fe.currentTarget.contains(fe.relatedTarget)&&(ee.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:fe=>{fe.target instanceof HTMLElement&&fe.target.dataset.dismissible==="false"||ee.current||(ee.current=!0,F.current=fe.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{se||R(!1)},onPointerDown:fe=>{fe.target instanceof HTMLElement&&fe.target.dataset.dismissible==="false"||he(!0)},onPointerUp:()=>he(!1)},E.filter(fe=>!fe.position&&J===0||fe.position===Y).map((fe,Vs)=>{var pr,mr;return S.createElement(gu,{key:fe.id,icons:y,index:Vs,toast:fe,defaultRichColors:l,duration:(pr=v==null?void 0:v.duration)!=null?pr:u,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:e,visibleToasts:h,closeButton:(mr=v==null?void 0:v.closeButton)!=null?mr:a,interacting:se,position:Y,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:Ce,toasts:E.filter(gr=>gr.position==fe.position),heights:K.filter(gr=>gr.position==fe.position),setHeights:ue,expandByDefault:n,gap:g,loadingIcon:p,expanded:O,pauseWhenPageIsHidden:x,cn:T})}))})):null};const yu=({...r})=>{const{theme:e="system"}=Kl();return d.jsx(vu,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...r})};var[js,pg]=On("Tooltip",[oi]),Dn=oi(),Mi="TooltipProvider",wu=700,fa="tooltip.open",[bu,Ui]=js(Mi),Fi=r=>{const{__scopeTooltip:e,delayDuration:t=wu,skipDelayDuration:s=300,disableHoverableContent:n=!1,children:a}=r,[i,o]=m.useState(!0),c=m.useRef(!1),l=m.useRef(0);return m.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),d.jsx(bu,{scope:e,isOpenDelayed:i,delayDuration:t,onOpen:m.useCallback(()=>{window.clearTimeout(l.current),o(!1)},[]),onClose:m.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o(!0),s)},[s]),isPointerInTransitRef:c,onPointerInTransitChange:m.useCallback(u=>{c.current=u},[]),disableHoverableContent:n,children:a})};Fi.displayName=Mi;var Bi="Tooltip",[mg,Cs]=js(Bi),un="TooltipTrigger",_u=m.forwardRef((r,e)=>{const{__scopeTooltip:t,...s}=r,n=Cs(un,t),a=Ui(un,t),i=Dn(t),o=m.useRef(null),c=xs(e,o,n.onTriggerChange),l=m.useRef(!1),u=m.useRef(!1),f=m.useCallback(()=>l.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),d.jsx(Ic,{asChild:!0,...i,children:d.jsx(Te.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...s,ref:c,onPointerMove:me(r.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(n.onTriggerEnter(),u.current=!0)}),onPointerLeave:me(r.onPointerLeave,()=>{n.onTriggerLeave(),u.current=!1}),onPointerDown:me(r.onPointerDown,()=>{l.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:me(r.onFocus,()=>{l.current||n.onOpen()}),onBlur:me(r.onBlur,n.onClose),onClick:me(r.onClick,n.onClose)})})});_u.displayName=un;var xu="TooltipPortal",[gg,ku]=js(xu,{forceMount:void 0}),or="TooltipContent",Vi=m.forwardRef((r,e)=>{const t=ku(or,r.__scopeTooltip),{forceMount:s=t.forceMount,side:n="top",...a}=r,i=Cs(or,r.__scopeTooltip);return d.jsx(Nn,{present:s||i.open,children:i.disableHoverableContent?d.jsx(qi,{side:n,...a,ref:e}):d.jsx(Tu,{side:n,...a,ref:e})})}),Tu=m.forwardRef((r,e)=>{const t=Cs(or,r.__scopeTooltip),s=Ui(or,r.__scopeTooltip),n=m.useRef(null),a=xs(e,n),[i,o]=m.useState(null),{trigger:c,onClose:l}=t,u=n.current,{onPointerInTransitChange:f}=s,h=m.useCallback(()=>{o(null),f(!1)},[f]),v=m.useCallback((w,g)=>{const p=w.currentTarget,y={x:w.clientX,y:w.clientY},b=Cu(y,p.getBoundingClientRect()),x=Pu(y,b),T=Ru(g.getBoundingClientRect()),E=Ou([...x,...T]);o(E),f(!0)},[f]);return m.useEffect(()=>()=>h(),[h]),m.useEffect(()=>{if(c&&u){const w=p=>v(p,u),g=p=>v(p,c);return c.addEventListener("pointerleave",w),u.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",w),u.removeEventListener("pointerleave",g)}}},[c,u,v,h]),m.useEffect(()=>{if(i){const w=g=>{const p=g.target,y={x:g.clientX,y:g.clientY},b=(c==null?void 0:c.contains(p))||(u==null?void 0:u.contains(p)),x=!Au(y,i);b?h():x&&(h(),l())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,u,i,l,h]),d.jsx(qi,{...r,ref:a})}),[Eu,Su]=js(Bi,{isInside:!1}),qi=m.forwardRef((r,e)=>{const{__scopeTooltip:t,children:s,"aria-label":n,onEscapeKeyDown:a,onPointerDownOutside:i,...o}=r,c=Cs(or,t),l=Dn(t),{onClose:u}=c;return m.useEffect(()=>(document.addEventListener(fa,u),()=>document.removeEventListener(fa,u)),[u]),m.useEffect(()=>{if(c.trigger){const f=h=>{const v=h.target;v!=null&&v.contains(c.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,u]),d.jsx($c,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:d.jsxs(Lc,{"data-state":c.stateAttribute,...l,...o,ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[d.jsx(Dc,{children:s}),d.jsx(Eu,{scope:t,isInside:!0,children:d.jsx(rl,{id:c.contentId,role:"tooltip",children:n||s})})]})})});Vi.displayName=or;var zi="TooltipArrow",ju=m.forwardRef((r,e)=>{const{__scopeTooltip:t,...s}=r,n=Dn(t);return Su(zi,t).isInside?null:d.jsx(Mc,{...n,...s,ref:e})});ju.displayName=zi;function Cu(r,e){const t=Math.abs(e.top-r.y),s=Math.abs(e.bottom-r.y),n=Math.abs(e.right-r.x),a=Math.abs(e.left-r.x);switch(Math.min(t,s,n,a)){case a:return"left";case n:return"right";case t:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function Pu(r,e,t=5){const s=[];switch(e){case"top":s.push({x:r.x-t,y:r.y+t},{x:r.x+t,y:r.y+t});break;case"bottom":s.push({x:r.x-t,y:r.y-t},{x:r.x+t,y:r.y-t});break;case"left":s.push({x:r.x+t,y:r.y-t},{x:r.x+t,y:r.y+t});break;case"right":s.push({x:r.x-t,y:r.y-t},{x:r.x-t,y:r.y+t});break}return s}function Ru(r){const{top:e,right:t,bottom:s,left:n}=r;return[{x:n,y:e},{x:t,y:e},{x:t,y:s},{x:n,y:s}]}function Au(r,e){const{x:t,y:s}=r;let n=!1;for(let a=0,i=e.length-1;a<e.length;i=a++){const o=e[a].x,c=e[a].y,l=e[i].x,u=e[i].y;c>s!=u>s&&t<(l-o)*(s-c)/(u-c)+o&&(n=!n)}return n}function Ou(r){const e=r.slice();return e.sort((t,s)=>t.x<s.x?-1:t.x>s.x?1:t.y<s.y?-1:t.y>s.y?1:0),Nu(e)}function Nu(r){if(r.length<=1)return r.slice();const e=[];for(let s=0;s<r.length;s++){const n=r[s];for(;e.length>=2;){const a=e[e.length-1],i=e[e.length-2];if((a.x-i.x)*(n.y-i.y)>=(a.y-i.y)*(n.x-i.x))e.pop();else break}e.push(n)}e.pop();const t=[];for(let s=r.length-1;s>=0;s--){const n=r[s];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(n.y-i.y)>=(a.y-i.y)*(n.x-i.x))t.pop();else break}t.push(n)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var Iu=Fi,Zi=Vi;const $u=Iu,Lu=m.forwardRef(({className:r,sideOffset:e=4,...t},s)=>d.jsx(Zi,{ref:s,sideOffset:e,className:le("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...t}));Lu.displayName=Zi.displayName;var Ps=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Rs=typeof window>"u"||"Deno"in globalThis;function De(){}function Du(r,e){return typeof r=="function"?r(e):r}function Mu(r){return typeof r=="number"&&r>=0&&r!==1/0}function Uu(r,e){return Math.max(r+(e||0)-Date.now(),0)}function pa(r,e){return typeof r=="function"?r(e):r}function Fu(r,e){return typeof r=="function"?r(e):r}function ma(r,e){const{type:t="all",exact:s,fetchStatus:n,predicate:a,queryKey:i,stale:o}=r;if(i){if(s){if(e.queryHash!==Mn(i,e.options))return!1}else if(!Cr(e.queryKey,i))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||n&&n!==e.state.fetchStatus||a&&!a(e))}function ga(r,e){const{exact:t,status:s,predicate:n,mutationKey:a}=r;if(a){if(!e.options.mutationKey)return!1;if(t){if(jr(e.options.mutationKey)!==jr(a))return!1}else if(!Cr(e.options.mutationKey,a))return!1}return!(s&&e.state.status!==s||n&&!n(e))}function Mn(r,e){return((e==null?void 0:e.queryKeyHashFn)||jr)(r)}function jr(r){return JSON.stringify(r,(e,t)=>dn(t)?Object.keys(t).sort().reduce((s,n)=>(s[n]=t[n],s),{}):t)}function Cr(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Cr(r[t],e[t])):!1}function Hi(r,e){if(r===e)return r;const t=va(r)&&va(e);if(t||dn(r)&&dn(e)){const s=t?r:Object.keys(r),n=s.length,a=t?e:Object.keys(e),i=a.length,o=t?[]:{};let c=0;for(let l=0;l<i;l++){const u=t?l:a[l];(!t&&s.includes(u)||t)&&r[u]===void 0&&e[u]===void 0?(o[u]=void 0,c++):(o[u]=Hi(r[u],e[u]),o[u]===r[u]&&r[u]!==void 0&&c++)}return n===i&&c===n?r:o}return e}function va(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function dn(r){if(!ya(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!ya(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function ya(r){return Object.prototype.toString.call(r)==="[object Object]"}function Bu(r){return new Promise(e=>{setTimeout(e,r)})}function Vu(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?Hi(r,e):e}function qu(r,e,t=0){const s=[...r,e];return t&&s.length>t?s.slice(1):s}function zu(r,e,t=0){const s=[e,...r];return t&&s.length>t?s.slice(0,-1):s}var Un=Symbol();function Ki(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===Un?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}var At,pt,Yt,Ya,Zu=(Ya=class extends Ps{constructor(){super();G(this,At);G(this,pt);G(this,Yt);M(this,Yt,e=>{if(!Rs&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){_(this,pt)||this.setEventListener(_(this,Yt))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,pt))==null||e.call(this),M(this,pt,void 0))}setEventListener(e){var t;M(this,Yt,e),(t=_(this,pt))==null||t.call(this),M(this,pt,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){_(this,At)!==e&&(M(this,At,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof _(this,At)=="boolean"?_(this,At):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},At=new WeakMap,pt=new WeakMap,Yt=new WeakMap,Ya),Gi=new Zu,Xt,mt,er,Xa,Hu=(Xa=class extends Ps{constructor(){super();G(this,Xt,!0);G(this,mt);G(this,er);M(this,er,e=>{if(!Rs&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){_(this,mt)||this.setEventListener(_(this,er))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,mt))==null||e.call(this),M(this,mt,void 0))}setEventListener(e){var t;M(this,er,e),(t=_(this,mt))==null||t.call(this),M(this,mt,e(this.setOnline.bind(this)))}setOnline(e){_(this,Xt)!==e&&(M(this,Xt,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return _(this,Xt)}},Xt=new WeakMap,mt=new WeakMap,er=new WeakMap,Xa),us=new Hu;function Ku(){let r,e;const t=new Promise((n,a)=>{r=n,e=a});t.status="pending",t.catch(()=>{});function s(n){Object.assign(t,n),delete t.resolve,delete t.reject}return t.resolve=n=>{s({status:"fulfilled",value:n}),r(n)},t.reject=n=>{s({status:"rejected",reason:n}),e(n)},t}function Gu(r){return Math.min(1e3*2**r,3e4)}function Wi(r){return(r??"online")==="online"?us.isOnline():!0}var Ji=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function Js(r){return r instanceof Ji}function Qi(r){let e=!1,t=0,s=!1,n;const a=Ku(),i=g=>{var p;s||(h(new Ji(g)),(p=r.abort)==null||p.call(r))},o=()=>{e=!0},c=()=>{e=!1},l=()=>Gi.isFocused()&&(r.networkMode==="always"||us.isOnline())&&r.canRun(),u=()=>Wi(r.networkMode)&&r.canRun(),f=g=>{var p;s||(s=!0,(p=r.onSuccess)==null||p.call(r,g),n==null||n(),a.resolve(g))},h=g=>{var p;s||(s=!0,(p=r.onError)==null||p.call(r,g),n==null||n(),a.reject(g))},v=()=>new Promise(g=>{var p;n=y=>{(s||l())&&g(y)},(p=r.onPause)==null||p.call(r)}).then(()=>{var g;n=void 0,s||(g=r.onContinue)==null||g.call(r)}),w=()=>{if(s)return;let g;const p=t===0?r.initialPromise:void 0;try{g=p??r.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(f).catch(y=>{var V;if(s)return;const b=r.retry??(Rs?0:3),x=r.retryDelay??Gu,T=typeof x=="function"?x(t,y):x,E=b===!0||typeof b=="number"&&t<b||typeof b=="function"&&b(t,y);if(e||!E){h(y);return}t++,(V=r.onFail)==null||V.call(r,t,y),Bu(T).then(()=>l()?void 0:v()).then(()=>{e?h(y):w()})})};return{promise:a,cancel:i,continue:()=>(n==null||n(),a),cancelRetry:o,continueRetry:c,canStart:u,start:()=>(u()?w():v().then(w),a)}}function Wu(){let r=[],e=0,t=o=>{o()},s=o=>{o()},n=o=>setTimeout(o,0);const a=o=>{e?r.push(o):n(()=>{t(o)})},i=()=>{const o=r;r=[],o.length&&n(()=>{s(()=>{o.forEach(c=>{t(c)})})})};return{batch:o=>{let c;e++;try{c=o()}finally{e--,e||i()}return c},batchCalls:o=>(...c)=>{a(()=>{o(...c)})},schedule:a,setNotifyFunction:o=>{t=o},setBatchNotifyFunction:o=>{s=o},setScheduler:o=>{n=o}}}var xe=Wu(),Ot,ei,Yi=(ei=class{constructor(){G(this,Ot)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Mu(this.gcTime)&&M(this,Ot,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(Rs?1/0:5*60*1e3))}clearGcTimeout(){_(this,Ot)&&(clearTimeout(_(this,Ot)),M(this,Ot,void 0))}},Ot=new WeakMap,ei),tr,rr,$e,ye,zr,Nt,Me,et,ti,Ju=(ti=class extends Yi{constructor(e){super();G(this,Me);G(this,tr);G(this,rr);G(this,$e);G(this,ye);G(this,zr);G(this,Nt);M(this,Nt,!1),M(this,zr,e.defaultOptions),this.setOptions(e.options),this.observers=[],M(this,$e,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,M(this,tr,Yu(this.options)),this.state=e.state??_(this,tr),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=_(this,ye))==null?void 0:e.promise}setOptions(e){this.options={..._(this,zr),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&_(this,$e).remove(this)}setData(e,t){const s=Vu(this.state.data,e,this.options);return ve(this,Me,et).call(this,{data:s,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),s}setState(e,t){ve(this,Me,et).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var s,n;const t=(s=_(this,ye))==null?void 0:s.promise;return(n=_(this,ye))==null||n.cancel(e),t?t.then(De).catch(De):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(_(this,tr))}isActive(){return this.observers.some(e=>Fu(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Un||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Uu(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=_(this,ye))==null||t.continue()}onOnline(){var t;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=_(this,ye))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),_(this,$e).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(_(this,ye)&&(_(this,Nt)?_(this,ye).cancel({revert:!0}):_(this,ye).cancelRetry()),this.scheduleGc()),_(this,$e).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ve(this,Me,et).call(this,{type:"invalidate"})}fetch(e,t){var c,l,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(_(this,ye))return _(this,ye).continueRetry(),_(this,ye).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const s=new AbortController,n=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(M(this,Nt,!0),s.signal)})},a=()=>{const f=Ki(this.options,t),h={queryKey:this.queryKey,meta:this.meta};return n(h),M(this,Nt,!1),this.options.persister?this.options.persister(f,h,this):f(h)},i={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};n(i),(c=this.options.behavior)==null||c.onFetch(i,this),M(this,rr,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((l=i.fetchOptions)==null?void 0:l.meta))&&ve(this,Me,et).call(this,{type:"fetch",meta:(u=i.fetchOptions)==null?void 0:u.meta});const o=f=>{var h,v,w,g;Js(f)&&f.silent||ve(this,Me,et).call(this,{type:"error",error:f}),Js(f)||((v=(h=_(this,$e).config).onError)==null||v.call(h,f,this),(g=(w=_(this,$e).config).onSettled)==null||g.call(w,this.state.data,f,this)),this.scheduleGc()};return M(this,ye,Qi({initialPromise:t==null?void 0:t.initialPromise,fn:i.fetchFn,abort:s.abort.bind(s),onSuccess:f=>{var h,v,w,g;if(f===void 0){o(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(p){o(p);return}(v=(h=_(this,$e).config).onSuccess)==null||v.call(h,f,this),(g=(w=_(this,$e).config).onSettled)==null||g.call(w,f,this.state.error,this),this.scheduleGc()},onError:o,onFail:(f,h)=>{ve(this,Me,et).call(this,{type:"failed",failureCount:f,error:h})},onPause:()=>{ve(this,Me,et).call(this,{type:"pause"})},onContinue:()=>{ve(this,Me,et).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),_(this,ye).start()}},tr=new WeakMap,rr=new WeakMap,$e=new WeakMap,ye=new WeakMap,zr=new WeakMap,Nt=new WeakMap,Me=new WeakSet,et=function(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Qu(s.data,this.options),fetchMeta:e.meta??null};case"success":return{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=e.error;return Js(n)&&n.revert&&_(this,rr)?{..._(this,rr),fetchStatus:"idle"}:{...s,error:n,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),xe.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),_(this,$e).notify({query:this,type:"updated",action:e})})},ti);function Qu(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Wi(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function Yu(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,s=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Ke,ri,Xu=(ri=class extends Ps{constructor(e={}){super();G(this,Ke);this.config=e,M(this,Ke,new Map)}build(e,t,s){const n=t.queryKey,a=t.queryHash??Mn(n,t);let i=this.get(a);return i||(i=new Ju({cache:this,queryKey:n,queryHash:a,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(i)),i}add(e){_(this,Ke).has(e.queryHash)||(_(this,Ke).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=_(this,Ke).get(e.queryHash);t&&(e.destroy(),t===e&&_(this,Ke).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){xe.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return _(this,Ke).get(e)}getAll(){return[..._(this,Ke).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>ma(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>ma(e,s)):t}notify(e){xe.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){xe.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){xe.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ke=new WeakMap,ri),Ge,_e,It,We,ct,si,ed=(si=class extends Yi{constructor(e){super();G(this,We);G(this,Ge);G(this,_e);G(this,It);this.mutationId=e.mutationId,M(this,_e,e.mutationCache),M(this,Ge,[]),this.state=e.state||td(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){_(this,Ge).includes(e)||(_(this,Ge).push(e),this.clearGcTimeout(),_(this,_e).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){M(this,Ge,_(this,Ge).filter(t=>t!==e)),this.scheduleGc(),_(this,_e).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){_(this,Ge).length||(this.state.status==="pending"?this.scheduleGc():_(this,_e).remove(this))}continue(){var e;return((e=_(this,It))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var n,a,i,o,c,l,u,f,h,v,w,g,p,y,b,x,T,E,V,de;M(this,It,Qi({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(K,ue)=>{ve(this,We,ct).call(this,{type:"failed",failureCount:K,error:ue})},onPause:()=>{ve(this,We,ct).call(this,{type:"pause"})},onContinue:()=>{ve(this,We,ct).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>_(this,_e).canRun(this)}));const t=this.state.status==="pending",s=!_(this,It).canStart();try{if(!t){ve(this,We,ct).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(n=_(this,_e).config).onMutate)==null?void 0:a.call(n,e,this));const ue=await((o=(i=this.options).onMutate)==null?void 0:o.call(i,e));ue!==this.state.context&&ve(this,We,ct).call(this,{type:"pending",context:ue,variables:e,isPaused:s})}const K=await _(this,It).start();return await((l=(c=_(this,_e).config).onSuccess)==null?void 0:l.call(c,K,e,this.state.context,this)),await((f=(u=this.options).onSuccess)==null?void 0:f.call(u,K,e,this.state.context)),await((v=(h=_(this,_e).config).onSettled)==null?void 0:v.call(h,K,null,this.state.variables,this.state.context,this)),await((g=(w=this.options).onSettled)==null?void 0:g.call(w,K,null,e,this.state.context)),ve(this,We,ct).call(this,{type:"success",data:K}),K}catch(K){try{throw await((y=(p=_(this,_e).config).onError)==null?void 0:y.call(p,K,e,this.state.context,this)),await((x=(b=this.options).onError)==null?void 0:x.call(b,K,e,this.state.context)),await((E=(T=_(this,_e).config).onSettled)==null?void 0:E.call(T,void 0,K,this.state.variables,this.state.context,this)),await((de=(V=this.options).onSettled)==null?void 0:de.call(V,void 0,K,e,this.state.context)),K}finally{ve(this,We,ct).call(this,{type:"error",error:K})}}finally{_(this,_e).runNext(this)}}},Ge=new WeakMap,_e=new WeakMap,It=new WeakMap,We=new WeakSet,ct=function(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),xe.batch(()=>{_(this,Ge).forEach(s=>{s.onMutationUpdate(e)}),_(this,_e).notify({mutation:this,type:"updated",action:e})})},si);function td(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ae,Zr,ni,rd=(ni=class extends Ps{constructor(e={}){super();G(this,Ae);G(this,Zr);this.config=e,M(this,Ae,new Map),M(this,Zr,Date.now())}build(e,t,s){const n=new ed({mutationCache:this,mutationId:++Qr(this,Zr)._,options:e.defaultMutationOptions(t),state:s});return this.add(n),n}add(e){const t=es(e),s=_(this,Ae).get(t)??[];s.push(e),_(this,Ae).set(t,s),this.notify({type:"added",mutation:e})}remove(e){var s;const t=es(e);if(_(this,Ae).has(t)){const n=(s=_(this,Ae).get(t))==null?void 0:s.filter(a=>a!==e);n&&(n.length===0?_(this,Ae).delete(t):_(this,Ae).set(t,n))}this.notify({type:"removed",mutation:e})}canRun(e){var s;const t=(s=_(this,Ae).get(es(e)))==null?void 0:s.find(n=>n.state.status==="pending");return!t||t===e}runNext(e){var s;const t=(s=_(this,Ae).get(es(e)))==null?void 0:s.find(n=>n!==e&&n.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){xe.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[..._(this,Ae).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(s=>ga(t,s))}findAll(e={}){return this.getAll().filter(t=>ga(e,t))}notify(e){xe.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return xe.batch(()=>Promise.all(e.map(t=>t.continue().catch(De))))}},Ae=new WeakMap,Zr=new WeakMap,ni);function es(r){var e;return((e=r.options.scope)==null?void 0:e.id)??String(r.mutationId)}function wa(r){return{onFetch:(e,t)=>{var u,f,h,v,w;const s=e.options,n=(h=(f=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,a=((v=e.state.data)==null?void 0:v.pages)||[],i=((w=e.state.data)==null?void 0:w.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const p=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=Ki(e.options,e.fetchOptions),b=async(x,T,E)=>{if(g)return Promise.reject();if(T==null&&x.pages.length)return Promise.resolve(x);const V={queryKey:e.queryKey,pageParam:T,direction:E?"backward":"forward",meta:e.options.meta};p(V);const de=await y(V),{maxPages:K}=e.options,ue=E?zu:qu;return{pages:ue(x.pages,de,K),pageParams:ue(x.pageParams,T,K)}};if(n&&a.length){const x=n==="backward",T=x?sd:ba,E={pages:a,pageParams:i},V=T(s,E);o=await b(E,V,x)}else{const x=r??a.length;do{const T=c===0?i[0]??s.initialPageParam:ba(s,o);if(c>0&&T==null)break;o=await b(o,T),c++}while(c<x)}return o};e.options.persister?e.fetchFn=()=>{var g,p;return(p=(g=e.options).persister)==null?void 0:p.call(g,l,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=l}}}function ba(r,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?r.getNextPageParam(e[s],e,t[s],t):void 0}function sd(r,{pages:e,pageParams:t}){var s;return e.length>0?(s=r.getPreviousPageParam)==null?void 0:s.call(r,e[0],e,t[0],t):void 0}var oe,gt,vt,sr,nr,yt,ar,ir,ai,nd=(ai=class{constructor(r={}){G(this,oe);G(this,gt);G(this,vt);G(this,sr);G(this,nr);G(this,yt);G(this,ar);G(this,ir);M(this,oe,r.queryCache||new Xu),M(this,gt,r.mutationCache||new rd),M(this,vt,r.defaultOptions||{}),M(this,sr,new Map),M(this,nr,new Map),M(this,yt,0)}mount(){Qr(this,yt)._++,_(this,yt)===1&&(M(this,ar,Gi.subscribe(async r=>{r&&(await this.resumePausedMutations(),_(this,oe).onFocus())})),M(this,ir,us.subscribe(async r=>{r&&(await this.resumePausedMutations(),_(this,oe).onOnline())})))}unmount(){var r,e;Qr(this,yt)._--,_(this,yt)===0&&((r=_(this,ar))==null||r.call(this),M(this,ar,void 0),(e=_(this,ir))==null||e.call(this),M(this,ir,void 0))}isFetching(r){return _(this,oe).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return _(this,gt).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=_(this,oe).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.getQueryData(r.queryKey);if(e===void 0)return this.fetchQuery(r);{const t=this.defaultQueryOptions(r),s=_(this,oe).build(this,t);return r.revalidateIfStale&&s.isStaleByTime(pa(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(r){return _(this,oe).findAll(r).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(r,e,t){const s=this.defaultQueryOptions({queryKey:r}),n=_(this,oe).get(s.queryHash),a=n==null?void 0:n.state.data,i=Du(e,a);if(i!==void 0)return _(this,oe).build(this,s).setData(i,{...t,manual:!0})}setQueriesData(r,e,t){return xe.batch(()=>_(this,oe).findAll(r).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=_(this,oe).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=_(this,oe);xe.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=_(this,oe),s={type:"active",...r};return xe.batch(()=>(t.findAll(r).forEach(n=>{n.reset()}),this.refetchQueries(s,e)))}cancelQueries(r={},e={}){const t={revert:!0,...e},s=xe.batch(()=>_(this,oe).findAll(r).map(n=>n.cancel(t)));return Promise.all(s).then(De).catch(De)}invalidateQueries(r={},e={}){return xe.batch(()=>{if(_(this,oe).findAll(r).forEach(s=>{s.invalidate()}),r.refetchType==="none")return Promise.resolve();const t={...r,type:r.refetchType??r.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(r={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},s=xe.batch(()=>_(this,oe).findAll(r).filter(n=>!n.isDisabled()).map(n=>{let a=n.fetch(void 0,t);return t.throwOnError||(a=a.catch(De)),n.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(De)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=_(this,oe).build(this,e);return t.isStaleByTime(pa(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(De).catch(De)}fetchInfiniteQuery(r){return r.behavior=wa(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(De).catch(De)}ensureInfiniteQueryData(r){return r.behavior=wa(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return us.isOnline()?_(this,gt).resumePausedMutations():Promise.resolve()}getQueryCache(){return _(this,oe)}getMutationCache(){return _(this,gt)}getDefaultOptions(){return _(this,vt)}setDefaultOptions(r){M(this,vt,r)}setQueryDefaults(r,e){_(this,sr).set(jr(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[..._(this,sr).values()];let t={};return e.forEach(s=>{Cr(r,s.queryKey)&&(t={...t,...s.defaultOptions})}),t}setMutationDefaults(r,e){_(this,nr).set(jr(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[..._(this,nr).values()];let t={};return e.forEach(s=>{Cr(r,s.mutationKey)&&(t={...t,...s.defaultOptions})}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={..._(this,vt).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=Mn(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Un&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{..._(this,vt).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){_(this,oe).clear(),_(this,gt).clear()}},oe=new WeakMap,gt=new WeakMap,vt=new WeakMap,sr=new WeakMap,nr=new WeakMap,yt=new WeakMap,ar=new WeakMap,ir=new WeakMap,ai),ad=m.createContext(void 0),id=({client:r,children:e})=>(m.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),d.jsx(ad.Provider,{value:r,children:e}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ds(){return ds=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},ds.apply(this,arguments)}var wt;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(wt||(wt={}));const _a="popstate";function od(r){r===void 0&&(r={});function e(s,n){let{pathname:a,search:i,hash:o}=s.location;return hn("",{pathname:a,search:i,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function t(s,n){return typeof n=="string"?n:eo(n)}return ld(e,t,null,r)}function je(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Xi(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cd(){return Math.random().toString(36).substr(2,8)}function xa(r,e){return{usr:r.state,key:r.key,idx:e}}function hn(r,e,t,s){return t===void 0&&(t=null),ds({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?As(e):e,{state:t,key:e&&e.key||s||cd()})}function eo(r){let{pathname:e="/",search:t="",hash:s=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function As(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substr(s),r=r.substr(0,s)),r&&(e.pathname=r)}return e}function ld(r,e,t,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:a=!1}=s,i=n.history,o=wt.Pop,c=null,l=u();l==null&&(l=0,i.replaceState(ds({},i.state,{idx:l}),""));function u(){return(i.state||{idx:null}).idx}function f(){o=wt.Pop;let p=u(),y=p==null?null:p-l;l=p,c&&c({action:o,location:g.location,delta:y})}function h(p,y){o=wt.Push;let b=hn(g.location,p,y);l=u()+1;let x=xa(b,l),T=g.createHref(b);try{i.pushState(x,"",T)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;n.location.assign(T)}a&&c&&c({action:o,location:g.location,delta:1})}function v(p,y){o=wt.Replace;let b=hn(g.location,p,y);l=u();let x=xa(b,l),T=g.createHref(b);i.replaceState(x,"",T),a&&c&&c({action:o,location:g.location,delta:0})}function w(p){let y=n.location.origin!=="null"?n.location.origin:n.location.href,b=typeof p=="string"?p:eo(p);return b=b.replace(/ $/,"%20"),je(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return o},get location(){return r(n,i)},listen(p){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(_a,f),c=p,()=>{n.removeEventListener(_a,f),c=null}},createHref(p){return e(n,p)},createURL:w,encodeLocation(p){let y=w(p);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:v,go(p){return i.go(p)}};return g}var ka;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(ka||(ka={}));function ud(r,e,t){return t===void 0&&(t="/"),dd(r,e,t,!1)}function dd(r,e,t,s){let n=typeof e=="string"?As(e):e,a=so(n.pathname||"/",t);if(a==null)return null;let i=to(r);hd(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let l=kd(a);o=_d(i[c],l,s)}return o}function to(r,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let n=(a,i,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&(je(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let l=Wt([s,c.relativePath]),u=t.concat(c);a.children&&a.children.length>0&&(je(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),to(a.children,e,u,l)),!(a.path==null&&!a.index)&&e.push({path:l,score:wd(l,a.index),routesMeta:u})};return r.forEach((a,i)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))n(a,i);else for(let c of ro(a.path))n(a,i,c)}),e}function ro(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,n=t.endsWith("?"),a=t.replace(/\?$/,"");if(s.length===0)return n?[a,""]:[a];let i=ro(s.join("/")),o=[];return o.push(...i.map(c=>c===""?a:[a,c].join("/"))),n&&o.push(...i),o.map(c=>r.startsWith("/")&&c===""?"/":c)}function hd(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:bd(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const fd=/^:[\w-]+$/,pd=3,md=2,gd=1,vd=10,yd=-2,Ta=r=>r==="*";function wd(r,e){let t=r.split("/"),s=t.length;return t.some(Ta)&&(s+=yd),e&&(s+=md),t.filter(n=>!Ta(n)).reduce((n,a)=>n+(fd.test(a)?pd:a===""?gd:vd),s)}function bd(r,e){return r.length===e.length&&r.slice(0,-1).every((s,n)=>s===e[n])?r[r.length-1]-e[e.length-1]:0}function _d(r,e,t){let{routesMeta:s}=r,n={},a="/",i=[];for(let o=0;o<s.length;++o){let c=s[o],l=o===s.length-1,u=a==="/"?e:e.slice(a.length)||"/",f=Ea({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!f&&l&&t&&!s[s.length-1].route.index&&(f=Ea({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!f)return null;Object.assign(n,f.params),i.push({params:n,pathname:Wt([a,f.pathname]),pathnameBase:Td(Wt([a,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(a=Wt([a,f.pathnameBase]))}return i}function Ea(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=xd(r.path,r.caseSensitive,r.end),n=e.match(t);if(!n)return null;let a=n[0],i=a.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:s.reduce((l,u,f)=>{let{paramName:h,isOptional:v}=u;if(h==="*"){let g=o[f]||"";i=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const w=o[f];return v&&!w?l[h]=void 0:l[h]=(w||"").replace(/%2F/g,"/"),l},{}),pathname:a,pathnameBase:i,pattern:r}}function xd(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Xi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let s=[],n="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),n+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":r!==""&&r!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),s]}function kd(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xi(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function so(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}const Wt=r=>r.join("/").replace(/\/\/+/g,"/"),Td=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/");function Ed(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const no=["post","put","patch","delete"];new Set(no);const Sd=["get",...no];new Set(Sd);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hs(){return hs=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},hs.apply(this,arguments)}const jd=m.createContext(null),Cd=m.createContext(null),ao=m.createContext(null),Os=m.createContext(null),Ns=m.createContext({outlet:null,matches:[],isDataRoute:!1}),io=m.createContext(null);function Fn(){return m.useContext(Os)!=null}function oo(){return Fn()||je(!1),m.useContext(Os).location}function Pd(r,e){return Rd(r,e)}function Rd(r,e,t,s){Fn()||je(!1);let{navigator:n}=m.useContext(ao),{matches:a}=m.useContext(Ns),i=a[a.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let l=oo(),u;if(e){var f;let p=typeof e=="string"?As(e):e;c==="/"||(f=p.pathname)!=null&&f.startsWith(c)||je(!1),u=p}else u=l;let h=u.pathname||"/",v=h;if(c!=="/"){let p=c.replace(/^\//,"").split("/");v="/"+h.replace(/^\//,"").split("/").slice(p.length).join("/")}let w=ud(r,{pathname:v}),g=$d(w&&w.map(p=>Object.assign({},p,{params:Object.assign({},o,p.params),pathname:Wt([c,n.encodeLocation?n.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?c:Wt([c,n.encodeLocation?n.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),a,t,s);return e&&g?m.createElement(Os.Provider,{value:{location:hs({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:wt.Pop}},g):g}function Ad(){let r=Ud(),e=Ed(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},e),t?m.createElement("pre",{style:n},t):null,null)}const Od=m.createElement(Ad,null);class Nd extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?m.createElement(Ns.Provider,{value:this.props.routeContext},m.createElement(io.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Id(r){let{routeContext:e,match:t,children:s}=r,n=m.useContext(jd);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),m.createElement(Ns.Provider,{value:e},s)}function $d(r,e,t,s){var n;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),r==null){var a;if(!t)return null;if(t.errors)r=t.matches;else if((a=s)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let i=r,o=(n=t)==null?void 0:n.errors;if(o!=null){let u=i.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);u>=0||je(!1),i=i.slice(0,Math.min(i.length,u+1))}let c=!1,l=-1;if(t&&s&&s.v7_partialHydration)for(let u=0;u<i.length;u++){let f=i[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=u),f.route.id){let{loaderData:h,errors:v}=t,w=f.route.loader&&h[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||w){c=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((u,f,h)=>{let v,w=!1,g=null,p=null;t&&(v=o&&f.route.id?o[f.route.id]:void 0,g=f.route.errorElement||Od,c&&(l<0&&h===0?(w=!0,p=null):l===h&&(w=!0,p=f.route.hydrateFallbackElement||null)));let y=e.concat(i.slice(0,h+1)),b=()=>{let x;return v?x=g:w?x=p:f.route.Component?x=m.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=u,m.createElement(Id,{match:f,routeContext:{outlet:u,matches:y,isDataRoute:t!=null},children:x})};return t&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?m.createElement(Nd,{location:t.location,revalidation:t.revalidation,component:g,error:v,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var fn=function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r}(fn||{});function Ld(r){let e=m.useContext(Cd);return e||je(!1),e}function Dd(r){let e=m.useContext(Ns);return e||je(!1),e}function Md(r){let e=Dd(),t=e.matches[e.matches.length-1];return t.route.id||je(!1),t.route.id}function Ud(){var r;let e=m.useContext(io),t=Ld(fn.UseRouteError),s=Md(fn.UseRouteError);return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function pn(r){je(!1)}function Fd(r){let{basename:e="/",children:t=null,location:s,navigationType:n=wt.Pop,navigator:a,static:i=!1,future:o}=r;Fn()&&je(!1);let c=e.replace(/^\/*/,"/"),l=m.useMemo(()=>({basename:c,navigator:a,static:i,future:hs({v7_relativeSplatPath:!1},o)}),[c,o,a,i]);typeof s=="string"&&(s=As(s));let{pathname:u="/",search:f="",hash:h="",state:v=null,key:w="default"}=s,g=m.useMemo(()=>{let p=so(u,c);return p==null?null:{location:{pathname:p,search:f,hash:h,state:v,key:w},navigationType:n}},[c,u,f,h,v,w,n]);return g==null?null:m.createElement(ao.Provider,{value:l},m.createElement(Os.Provider,{children:t,value:g}))}function Bd(r){let{children:e,location:t}=r;return Pd(mn(e),t)}new Promise(()=>{});function mn(r,e){e===void 0&&(e=[]);let t=[];return m.Children.forEach(r,(s,n)=>{if(!m.isValidElement(s))return;let a=[...e,n];if(s.type===m.Fragment){t.push.apply(t,mn(s.props.children,a));return}s.type!==pn&&je(!1),!s.props.index||!s.props.children||je(!1);let i={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=mn(s.props.children,a)),t.push(i)}),t}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Vd="6";try{window.__reactRouterVersion=Vd}catch{}const qd="startTransition",Sa=Zc[qd];function zd(r){let{basename:e,children:t,future:s,window:n}=r,a=m.useRef();a.current==null&&(a.current=od({window:n,v5Compat:!0}));let i=a.current,[o,c]=m.useState({action:i.action,location:i.location}),{v7_startTransition:l}=s||{},u=m.useCallback(f=>{l&&Sa?Sa(()=>c(f)):c(f)},[c,l]);return m.useLayoutEffect(()=>i.listen(u),[i,u]),m.createElement(Fd,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i,future:s})}var ja;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(ja||(ja={}));var Ca;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Ca||(Ca={}));const Zd=ks("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Je=m.forwardRef(({className:r,variant:e,size:t,asChild:s=!1,...n},a)=>{const i=s?Uc:"button";return d.jsx(i,{className:le(Zd({variant:e,size:t,className:r})),ref:a,...n})});Je.displayName="Button";const st=m.forwardRef(({className:r,...e},t)=>d.jsx("div",{ref:t,className:le("rounded-lg border bg-card text-card-foreground shadow-sm",r),...e}));st.displayName="Card";const nt=m.forwardRef(({className:r,...e},t)=>d.jsx("div",{ref:t,className:le("flex flex-col space-y-1.5 p-6",r),...e}));nt.displayName="CardHeader";const bt=m.forwardRef(({className:r,...e},t)=>d.jsx("h3",{ref:t,className:le("text-2xl font-semibold leading-none tracking-tight",r),...e}));bt.displayName="CardTitle";const Hd=m.forwardRef(({className:r,...e},t)=>d.jsx("p",{ref:t,className:le("text-sm text-muted-foreground",r),...e}));Hd.displayName="CardDescription";const at=m.forwardRef(({className:r,...e},t)=>d.jsx("div",{ref:t,className:le("p-6 pt-0",r),...e}));at.displayName="CardContent";const Kd=m.forwardRef(({className:r,...e},t)=>d.jsx("div",{ref:t,className:le("flex items-center p-6 pt-0",r),...e}));Kd.displayName="CardFooter";class Gd{constructor(){jt(this,"isDevelopment",!1)}formatMessage(e,t,s){return{level:e,message:t,timestamp:new Date().toISOString(),context:s}}shouldLog(e){return!(!this.isDevelopment&&e==="debug")}debug(e,t){if(this.shouldLog("debug")){const s=this.formatMessage("debug",e,t);console.debug(`[${s.timestamp}] DEBUG: ${e}`,t||"")}}info(e,t){if(this.shouldLog("info")){const s=this.formatMessage("info",e,t);console.info(`[${s.timestamp}] INFO: ${e}`,t||"")}}warn(e,t){if(this.shouldLog("warn")){const s=this.formatMessage("warn",e,t);console.warn(`[${s.timestamp}] WARN: ${e}`,t||"")}}error(e,t,s){if(this.shouldLog("error")){const n=this.formatMessage("error",e,{...s,error:(t==null?void 0:t.message)||t});console.error(`[${n.timestamp}] ERROR: ${e}`,t,s||""),this.isDevelopment}}}const pe=new Gd;class co extends m.Component{constructor(t){super(t);jt(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0})});this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,s){var n,a;pe.error("React Error Boundary caught an error",t,{componentStack:s.componentStack,errorBoundary:this.constructor.name}),(a=(n=this.props).onError)==null||a.call(n,t,s)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:d.jsxs(st,{className:"max-w-lg mx-auto mt-8",children:[d.jsx(nt,{children:d.jsxs(bt,{className:"flex items-center gap-2 text-destructive",children:[d.jsx(Ll,{className:"h-5 w-5"}),"Something went wrong"]})}),d.jsxs(at,{className:"space-y-4",children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"We encountered an unexpected error. This has been logged and will be investigated."}),!1,d.jsxs("div",{className:"flex gap-2",children:[d.jsxs(Je,{onClick:this.handleReset,variant:"outline",size:"sm",children:[d.jsx(Ol,{className:"h-4 w-4 mr-2"}),"Try Again"]}),d.jsx(Je,{onClick:()=>window.location.reload(),variant:"default",size:"sm",children:"Reload Page"})]})]})]}):this.props.children}}const Wd="modulepreload",Jd=function(r){return"/"+r},Pa={},qe=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.allSettled(t.map(c=>{if(c=Jd(c),c in Pa)return;Pa[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":Wd,l||(f.as="script"),f.crossOrigin="",f.href=c,o&&f.setAttribute("nonce",o),document.head.appendChild(f),l)return new Promise((h,v)=>{f.addEventListener("load",h),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return n.then(i=>{for(const o of i||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})},Qd=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>qe(async()=>{const{default:s}=await Promise.resolve().then(()=>hr);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Bn extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class Yd extends Bn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Xd extends Bn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class eh extends Bn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var gn;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(gn||(gn={}));var th=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function o(u){try{l(s.next(u))}catch(f){i(f)}}function c(u){try{l(s.throw(u))}catch(f){i(f)}}function l(u){u.done?a(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};class rh{constructor(e,{headers:t={},customFetch:s,region:n=gn.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=Qd(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return th(this,void 0,void 0,function*(){try{const{headers:n,method:a,body:i}=t;let o={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(o["x-region"]=c);let l;i&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",l=i):typeof i=="string"?(o["Content-Type"]="text/plain",l=i):typeof FormData<"u"&&i instanceof FormData?l=i:(o["Content-Type"]="application/json",l=JSON.stringify(i)));const u=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:l}).catch(w=>{throw new Yd(w)}),f=u.headers.get("x-relay-error");if(f&&f==="true")throw new Xd(u);if(!u.ok)throw new eh(u);let h=((s=u.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),v;return h==="application/json"?v=yield u.json():h==="application/octet-stream"?v=yield u.blob():h==="text/event-stream"?v=u:h==="multipart/form-data"?v=yield u.formData():v=yield u.text(),{data:v,error:null}}catch(n){return{data:null,error:n}}})}}var Se={},Vn={},Is={},Hr={},$s={},Ls={},sh=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},cr=sh();const nh=cr.fetch,lo=cr.fetch.bind(cr),uo=cr.Headers,ah=cr.Request,ih=cr.Response,hr=Object.freeze(Object.defineProperty({__proto__:null,Headers:uo,Request:ah,Response:ih,default:lo,fetch:nh},Symbol.toStringTag,{value:"Module"})),oh=Hc(hr);var Ds={};Object.defineProperty(Ds,"__esModule",{value:!0});let ch=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ds.default=ch;var ho=Le&&Le.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ls,"__esModule",{value:!0});const lh=ho(oh),uh=ho(Ds);let dh=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=lh.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var i,o,c;let l=null,u=null,f=null,h=a.status,v=a.statusText;if(a.ok){if(this.method!=="HEAD"){const y=await a.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const g=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),p=(o=a.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");g&&p&&p.length>1&&(f=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,h=406,v="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await a.text();try{l=JSON.parse(g),Array.isArray(l)&&a.status===404&&(u=[],l=null,h=200,v="OK")}catch{a.status===404&&g===""?(h=204,v="No Content"):l={message:g}}if(l&&this.isMaybeSingle&&(!((c=l==null?void 0:l.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,h=200,v="OK"),l&&this.shouldThrowOnError)throw new uh.default(l)}return{error:l,data:u,count:f,status:h,statusText:v}});return this.shouldThrowOnError||(n=n.catch(a=>{var i,o,c;return{error:{message:`${(i=a==null?void 0:a.name)!==null&&i!==void 0?i:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(o=a==null?void 0:a.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};Ls.default=dh;var hh=Le&&Le.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($s,"__esModule",{value:!0});const fh=hh(Ls);let ph=class extends fh.default{select(e){let t=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:a=n}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const a=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:a=!1,format:i="text"}={}){var o;const c=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${l}"; options=${c};`,i==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};$s.default=ph;var mh=Le&&Le.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Hr,"__esModule",{value:!0});const gh=mh($s);let vh=class extends gh.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const i=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};Hr.default=vh;var yh=Le&&Le.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Is,"__esModule",{value:!0});const vr=yh(Hr);let wh=class{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=t,this.schema=s,this.fetch=n}select(e,{head:t=!1,count:s}={}){const n=t?"HEAD":"GET";let a=!1;const i=(e??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",i),s&&(this.headers.Prefer=`count=${s}`),new vr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:s=!0}={}){const n="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),t&&a.push(`count=${t}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const i=e.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(i.length>0){const o=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new vr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:a=!0}={}){const i="POST",o=[`resolution=${s?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),a||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new vr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new vr.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new vr.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Is.default=wh;var Ms={},Us={};Object.defineProperty(Us,"__esModule",{value:!0});Us.version=void 0;Us.version="0.0.0-automated";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.DEFAULT_HEADERS=void 0;const bh=Us;Ms.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${bh.version}`};var fo=Le&&Le.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vn,"__esModule",{value:!0});const _h=fo(Is),xh=fo(Hr),kh=Ms;let Th=class po{constructor(e,{headers:t={},schema:s,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},kh.DEFAULT_HEADERS),t),this.schemaName=s,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new _h.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new po(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:n=!1,count:a}={}){let i;const o=new URL(`${this.url}/rpc/${e}`);let c;s||n?(i=s?"HEAD":"GET",Object.entries(t).filter(([u,f])=>f!==void 0).map(([u,f])=>[u,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([u,f])=>{o.searchParams.append(u,f)})):(i="POST",c=t);const l=Object.assign({},this.headers);return a&&(l.Prefer=`count=${a}`),new xh.default({method:i,url:o,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Vn.default=Th;var fr=Le&&Le.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Se,"__esModule",{value:!0});Se.PostgrestError=Se.PostgrestBuilder=Se.PostgrestTransformBuilder=Se.PostgrestFilterBuilder=Se.PostgrestQueryBuilder=Se.PostgrestClient=void 0;const mo=fr(Vn);Se.PostgrestClient=mo.default;const go=fr(Is);Se.PostgrestQueryBuilder=go.default;const vo=fr(Hr);Se.PostgrestFilterBuilder=vo.default;const yo=fr($s);Se.PostgrestTransformBuilder=yo.default;const wo=fr(Ls);Se.PostgrestBuilder=wo.default;const bo=fr(Ds);Se.PostgrestError=bo.default;var Eh=Se.default={PostgrestClient:mo.default,PostgrestQueryBuilder:go.default,PostgrestFilterBuilder:vo.default,PostgrestTransformBuilder:yo.default,PostgrestBuilder:wo.default,PostgrestError:bo.default};const{PostgrestClient:Sh,PostgrestQueryBuilder:xg,PostgrestFilterBuilder:kg,PostgrestTransformBuilder:Tg,PostgrestBuilder:Eg,PostgrestError:Sg}=Eh;let vn;typeof window>"u"?vn=require("ws"):vn=window.WebSocket;const jh=vn,Ch="2.11.10",Ph={"X-Client-Info":`realtime-js/${Ch}`},Rh="1.0.0",_o=1e4,Ah=1e3;var Jt;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Jt||(Jt={}));var be;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(be||(be={}));var Ue;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Ue||(Ue={}));var yn;(function(r){r.websocket="websocket"})(yn||(yn={}));var Rt;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Rt||(Rt={}));class Oh{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const n=t.getUint8(1),a=t.getUint8(2);let i=this.HEADER_LENGTH+2;const o=s.decode(e.slice(i,i+n));i=i+n;const c=s.decode(e.slice(i,i+a));i=i+a;const l=JSON.parse(s.decode(e.slice(i,e.byteLength)));return{ref:null,topic:o,event:c,payload:l}}}class xo{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var re;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(re||(re={}));const Ra=(r,e,t={})=>{var s;const n=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((a,i)=>(a[i]=Nh(i,r,e,n),a),{})},Nh=(r,e,t,s)=>{const n=e.find(o=>o.name===r),a=n==null?void 0:n.type,i=t[r];return a&&!s.includes(a)?ko(a,i):wn(i)},ko=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Dh(e,t)}switch(r){case re.bool:return Ih(e);case re.float4:case re.float8:case re.int2:case re.int4:case re.int8:case re.numeric:case re.oid:return $h(e);case re.json:case re.jsonb:return Lh(e);case re.timestamp:return Mh(e);case re.abstime:case re.date:case re.daterange:case re.int4range:case re.int8range:case re.money:case re.reltime:case re.text:case re.time:case re.timestamptz:case re.timetz:case re.tsrange:case re.tstzrange:return wn(e);default:return wn(e)}},wn=r=>r,Ih=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},$h=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Lh=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Dh=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let a;const i=r.slice(1,t);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(o=>ko(e,o))}return r},Mh=r=>typeof r=="string"?r.replace(" ","T"):r,To=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Qs{constructor(e,t,s={},n=_o){this.channel=e,this.event=t,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Aa;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Aa||(Aa={}));class Tr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:a,onLeave:i,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Tr.syncState(this.state,n,a,i),this.pendingDiffs.forEach(c=>{this.state=Tr.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},n=>{const{onJoin:a,onLeave:i,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Tr.syncDiff(this.state,n,a,i),o())}),this.onJoin((n,a,i)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:a,newPresences:i})}),this.onLeave((n,a,i)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,n){const a=this.cloneDeep(e),i=this.transformState(t),o={},c={};return this.map(a,(l,u)=>{i[l]||(c[l]=u)}),this.map(i,(l,u)=>{const f=a[l];if(f){const h=u.map(p=>p.presence_ref),v=f.map(p=>p.presence_ref),w=u.filter(p=>v.indexOf(p.presence_ref)<0),g=f.filter(p=>h.indexOf(p.presence_ref)<0);w.length>0&&(o[l]=w),g.length>0&&(c[l]=g)}else o[l]=u}),this.syncDiff(a,{joins:o,leaves:c},s,n)}static syncDiff(e,t,s,n){const{joins:a,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(a,(o,c)=>{var l;const u=(l=e[o])!==null&&l!==void 0?l:[];if(e[o]=this.cloneDeep(c),u.length>0){const f=e[o].map(v=>v.presence_ref),h=u.filter(v=>f.indexOf(v.presence_ref)<0);e[o].unshift(...h)}s(o,u,c)}),this.map(i,(o,c)=>{let l=e[o];if(!l)return;const u=c.map(f=>f.presence_ref);l=l.filter(f=>u.indexOf(f.presence_ref)<0),e[o]=l,n(o,l,c),l.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const n=e[s];return"metas"in n?t[s]=n.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[s]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Oa;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Oa||(Oa={}));var Na;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Na||(Na={}));var rt;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(rt||(rt={}));class qn{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Qs(this,Ue.join,this.params,this.timeout),this.rejoinTimer=new xo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=be.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ue.reply,{},(n,a)=>{this._trigger(this._replyEventName(a),n)}),this.presence=new Tr(this),this.broadcastEndpointURL=To(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:i,private:o}}=this.params;this._onError(u=>e==null?void 0:e(rt.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(rt.CLOSED));const c={},l={broadcast:a,presence:i,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&n!==void 0?n:[],private:o};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var f;if(this.socket.setAuth(),u===void 0){e==null||e(rt.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,v=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,w=[];for(let g=0;g<v;g++){const p=h[g],{filter:{event:y,schema:b,table:x,filter:T}}=p,E=u&&u[g];if(E&&E.event===y&&E.schema===b&&E.table===x&&E.filter===T)w.push(Object.assign(Object.assign({},p),{id:E.id}));else{this.unsubscribe(),this.state=be.errored,e==null||e(rt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(rt.SUBSCRIBED);return}}).receive("error",u=>{this.state=be.errored,e==null||e(rt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(rt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this._on(e,t,s)}async send(e,t={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:i}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=l.body)===null||n===void 0?void 0:n.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,o,c;const l=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(i=this.params)===null||i===void 0?void 0:i.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),l.receive("ok",()=>a("ok")),l.receive("error",()=>a("error")),l.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=be.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ue.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(s=>{const n=new Qs(this,Ue.leave,{},e);n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,s){const n=new AbortController,a=setTimeout(()=>n.abort(),s),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(a),i}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Qs(this,e,t,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var n,a;const i=e.toLocaleLowerCase(),{close:o,error:c,leave:l,join:u}=Ue;if(s&&[o,c,l,u].indexOf(i)>=0&&s!==this._joinRef())return;let h=this._onMessage(i,t,s);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(v=>{var w,g,p;return((w=v.filter)===null||w===void 0?void 0:w.event)==="*"||((p=(g=v.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===i}).map(v=>v.callback(h,s)):(a=this.bindings[i])===null||a===void 0||a.filter(v=>{var w,g,p,y,b,x;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in v){const T=v.id,E=(w=v.filter)===null||w===void 0?void 0:w.event;return T&&((g=t.ids)===null||g===void 0?void 0:g.includes(T))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((p=t.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const T=(b=(y=v==null?void 0:v.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return T==="*"||T===((x=t==null?void 0:t.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===i}).map(v=>{if(typeof h=="object"&&"ids"in h){const w=h.data,{schema:g,table:p,commit_timestamp:y,type:b,errors:x}=w;h=Object.assign(Object.assign({},{schema:g,table:p,commit_timestamp:y,eventType:b,new:{},old:{},errors:x}),this._getPayloadRecords(w))}v.callback(h,s)})}_isClosed(){return this.state===be.closed}_isJoined(){return this.state===be.joined}_isJoining(){return this.state===be.joining}_isLeaving(){return this.state===be.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const n=e.toLocaleLowerCase(),a={type:n,filter:t,callback:s};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var a;return!(((a=n.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&qn.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ue.close,{},e)}_onError(e){this._on(Ue.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=be.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Ra(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Ra(e.columns,e.old_record)),t}}const Ia=()=>{},Uh=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Fh{constructor(e,t){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Ph,this.params={},this.timeout=_o,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ia,this.ref=0,this.logger=Ia,this.conn=null,this.sendBuffer=[],this.serializer=new Oh,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>qe(async()=>{const{default:c}=await Promise.resolve().then(()=>hr);return{default:c}},void 0).then(({default:c})=>c(...o)):i=fetch,(...o)=>i(...o)},this.endPoint=`${e}/${yn.websocket}`,this.httpEndpoint=To(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(s=t==null?void 0:t.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(a,i)=>i(JSON.stringify(a)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new xo(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=jh),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new Bh(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Rh}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(s=>s._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Jt.connecting:return Rt.Connecting;case Jt.open:return Rt.Open;case Jt.closing:return Rt.Closing;default:return Rt.Closed}}isConnected(){return this.connectionState()===Rt.Open}channel(e,t={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(a=>a.topic===s);if(n)return n;{const a=new qn(`realtime:${e}`,t,this);return this.channels.push(a),a}}push(e){const{topic:t,event:s,payload:n,ref:a}=e,i=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${t} ${s} (${a})`,n),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),s.joinedOnce&&s._isJoined()&&s._push(Ue.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Ah,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:s,event:n,payload:a,ref:i}=t;s==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${s} ${n} ${i&&"("+i+")"||""}`,a),Array.from(this.channels).filter(o=>o._isMember(s)).forEach(o=>o._trigger(n,a,i)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ue.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${s}${n}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([Uh],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}}class Bh{constructor(e,t,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Jt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=s.close}}class zn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ge(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class Vh extends zn{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class bn extends zn{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var qh=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function o(u){try{l(s.next(u))}catch(f){i(f)}}function c(u){try{l(s.throw(u))}catch(f){i(f)}}function l(u){u.done?a(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};const Eo=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>qe(async()=>{const{default:s}=await Promise.resolve().then(()=>hr);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},zh=()=>qh(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield qe(()=>Promise.resolve().then(()=>hr),void 0)).Response:Response}),_n=r=>{if(Array.isArray(r))return r.map(t=>_n(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const n=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[n]=_n(s)}),e};var Mt=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function o(u){try{l(s.next(u))}catch(f){i(f)}}function c(u){try{l(s.throw(u))}catch(f){i(f)}}function l(u){u.done?a(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};const Ys=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Zh=(r,e,t)=>Mt(void 0,void 0,void 0,function*(){const s=yield zh();r instanceof s&&!(t!=null&&t.noResolveJson)?r.json().then(n=>{e(new Vh(Ys(n),r.status||500))}).catch(n=>{e(new bn(Ys(n),n))}):e(new bn(Ys(r),r))}),Hh=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),t))};function Kr(r,e,t,s,n,a){return Mt(this,void 0,void 0,function*(){return new Promise((i,o)=>{r(t,Hh(e,s,n,a)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>Zh(c,o,s))})})}function fs(r,e,t,s){return Mt(this,void 0,void 0,function*(){return Kr(r,"GET",e,t,s)})}function dt(r,e,t,s,n){return Mt(this,void 0,void 0,function*(){return Kr(r,"POST",e,s,n,t)})}function Kh(r,e,t,s,n){return Mt(this,void 0,void 0,function*(){return Kr(r,"PUT",e,s,n,t)})}function Gh(r,e,t,s){return Mt(this,void 0,void 0,function*(){return Kr(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function So(r,e,t,s,n){return Mt(this,void 0,void 0,function*(){return Kr(r,"DELETE",e,s,n,t)})}var Ee=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function o(u){try{l(s.next(u))}catch(f){i(f)}}function c(u){try{l(s.throw(u))}catch(f){i(f)}}function l(u){u.done?a(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};const Wh={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$a={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Jh{constructor(e,t={},s,n){this.url=e,this.headers=t,this.bucketId=s,this.fetch=Eo(n)}uploadOrUpdate(e,t,s,n){return Ee(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},$a),n);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=s,o["cache-control"]=`max-age=${i.cacheControl}`,o["content-type"]=i.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(o=Object.assign(Object.assign({},o),n.headers));const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),f=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:a,headers:o},i!=null&&i.duplex?{duplex:i.duplex}:{})),h=yield f.json();return f.ok?{data:{path:l,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(a){if(ge(a))return{data:null,error:a};throw a}})}upload(e,t,s){return Ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,n){return Ee(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),i=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${i}`);o.searchParams.set("token",t);try{let c;const l=Object.assign({upsert:$a.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",l.cacheControl)):(c=s,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const f=yield this.fetch(o.toString(),{method:"PUT",body:c,headers:u}),h=yield f.json();return f.ok?{data:{path:a,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(ge(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Ee(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);t!=null&&t.upsert&&(n["x-upsert"]="true");const a=yield dt(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),i=new URL(this.url+a.url),o=i.searchParams.get("token");if(!o)throw new zn("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:o},error:null}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}update(e,t,s){return Ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Ee(this,void 0,void 0,function*(){try{return{data:yield dt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}copy(e,t,s){return Ee(this,void 0,void 0,function*(){try{return{data:{path:(yield dt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,s){return Ee(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),a=yield dt(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,s){return Ee(this,void 0,void 0,function*(){try{const n=yield dt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}download(e,t){return Ee(this,void 0,void 0,function*(){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),i=a?`?${a}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield fs(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(ge(o))return{data:null,error:o};throw o}})}info(e){return Ee(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield fs(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:_n(s),error:null}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}exists(e){return Ee(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Gh(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(ge(s)&&s instanceof bn){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&n.push(c);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${l}`)}}}remove(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield So(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}})}list(e,t,s){return Ee(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Wh),t),{prefix:e||""});return{data:yield dt(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(ge(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Qh="2.7.1",Yh={"X-Client-Info":`storage-js/${Qh}`};var qt=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function o(u){try{l(s.next(u))}catch(f){i(f)}}function c(u){try{l(s.throw(u))}catch(f){i(f)}}function l(u){u.done?a(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};class Xh{constructor(e,t={},s){this.url=e,this.headers=Object.assign(Object.assign({},Yh),t),this.fetch=Eo(s)}listBuckets(){return qt(this,void 0,void 0,function*(){try{return{data:yield fs(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ge(e))return{data:null,error:e};throw e}})}getBucket(e){return qt(this,void 0,void 0,function*(){try{return{data:yield fs(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return qt(this,void 0,void 0,function*(){try{return{data:yield dt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return qt(this,void 0,void 0,function*(){try{return{data:yield Kh(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ge(s))return{data:null,error:s};throw s}})}emptyBucket(e){return qt(this,void 0,void 0,function*(){try{return{data:yield dt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}})}deleteBucket(e){return qt(this,void 0,void 0,function*(){try{return{data:yield So(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}})}}class ef extends Xh{constructor(e,t={},s){super(e,t,s)}from(e){return new Jh(this.url,this.headers,e,this.fetch)}}const tf="2.49.10";let yr="";typeof Deno<"u"?yr="deno":typeof document<"u"?yr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?yr="react-native":yr="node";const rf={"X-Client-Info":`supabase-js-${yr}/${tf}`},sf={headers:rf},nf={schema:"public"},af={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},of={};var cf=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function o(u){try{l(s.next(u))}catch(f){i(f)}}function c(u){try{l(s.throw(u))}catch(f){i(f)}}function l(u){u.done?a(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};const lf=r=>{let e;return r?e=r:typeof fetch>"u"?e=lo:e=fetch,(...t)=>e(...t)},uf=()=>typeof Headers>"u"?uo:Headers,df=(r,e,t)=>{const s=lf(t),n=uf();return(a,i)=>cf(void 0,void 0,void 0,function*(){var o;const c=(o=yield e())!==null&&o!==void 0?o:r;let l=new n(i==null?void 0:i.headers);return l.has("apikey")||l.set("apikey",r),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),s(a,Object.assign(Object.assign({},i),{headers:l}))})};var hf=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function o(u){try{l(s.next(u))}catch(f){i(f)}}function c(u){try{l(s.throw(u))}catch(f){i(f)}}function l(u){u.done?a(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};function ff(r){return r.endsWith("/")?r:r+"/"}function pf(r,e){var t,s;const{db:n,auth:a,realtime:i,global:o}=r,{db:c,auth:l,realtime:u,global:f}=e,h={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},l),a),realtime:Object.assign(Object.assign({},u),i),global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(t=f==null?void 0:f.headers)!==null&&t!==void 0?t:{}),(s=o==null?void 0:o.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>hf(this,void 0,void 0,function*(){return""})};return r.accessToken?h.accessToken=r.accessToken:delete h.accessToken,h}const jo="2.69.1",Ht=30*1e3,xn=3,Xs=xn*Ht,mf="http://localhost:9999",gf="supabase.auth.token",vf={"X-Client-Info":`gotrue-js/${jo}`},kn="X-Supabase-Api-Version",Co={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yf=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wf=6e5;class Zn extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function D(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class bf extends Zn{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function _f(r){return D(r)&&r.name==="AuthApiError"}class Po extends Zn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Et extends Zn{constructor(e,t,s,n){super(e,s,n),this.name=t,this.status=s}}class lt extends Et{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xf(r){return D(r)&&r.name==="AuthSessionMissingError"}class en extends Et{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ts extends Et{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class rs extends Et{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function kf(r){return D(r)&&r.name==="AuthImplicitGrantRedirectError"}class La extends Et{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Tn extends Et{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function tn(r){return D(r)&&r.name==="AuthRetryableFetchError"}class Da extends Et{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Er extends Et{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ma="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ua=` 	
\r=`.split(""),Tf=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<Ua.length;e+=1)r[Ua[e].charCodeAt(0)]=-2;for(let e=0;e<Ma.length;e+=1)r[Ma[e].charCodeAt(0)]=e;return r})();function Ro(r,e,t){const s=Tf[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Fa(r){const e=[],t=i=>{e.push(String.fromCodePoint(i))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},a=i=>{jf(i,s,t)};for(let i=0;i<r.length;i+=1)Ro(r.charCodeAt(i),n,a);return e.join("")}function Ef(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Sf(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|n)+65536,t+=1}Ef(s,e)}}function jf(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if(!(r>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Cf(r){const e=[],t={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<r.length;n+=1)Ro(r.charCodeAt(n),t,s);return new Uint8Array(e)}function Pf(r){const e=[];return Sf(r,t=>e.push(t)),new Uint8Array(e)}function Rf(r){return Math.round(Date.now()/1e3)+r}function Af(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const He=()=>typeof window<"u"&&typeof document<"u",Ct={tested:!1,writable:!1},Sr=()=>{if(!He())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ct.tested)return Ct.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Ct.tested=!0,Ct.writable=!0}catch{Ct.tested=!0,Ct.writable=!1}return Ct.writable};function Of(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((n,a)=>{e[a]=n})}catch{}return t.searchParams.forEach((s,n)=>{e[n]=s}),e}const Ao=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>qe(async()=>{const{default:s}=await Promise.resolve().then(()=>hr);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},Nf=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Oo=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},ss=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ns=async(r,e)=>{await r.removeItem(e)};class Fs{constructor(){this.promise=new Fs.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Fs.promiseConstructor=Promise;function rn(r){const e=r.split(".");if(e.length!==3)throw new Er("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!yf.test(e[s]))throw new Er("JWT not in base64url format");return{header:JSON.parse(Fa(e[0])),payload:JSON.parse(Fa(e[1])),signature:Cf(e[2]),raw:{header:e[0],payload:e[1]}}}async function If(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function $f(r,e){return new Promise((s,n)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await r(a);if(!e(a,null,i)){s(i);return}}catch(i){if(!e(a,i)){n(i);return}}})()})}function Lf(r){return("0"+r.toString(16)).substr(-2)}function Df(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let n="";for(let a=0;a<56;a++)n+=t.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,Lf).join("")}async function Mf(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(s);return Array.from(n).map(a=>String.fromCharCode(a)).join("")}async function Uf(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Mf(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zt(r,e,t=!1){const s=Df();let n=s;t&&(n+="/PASSWORD_RECOVERY"),await Oo(r,`${e}-code-verifier`,n);const a=await Uf(s);return[a,s===a?"plain":"s256"]}const Ff=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Bf(r){const e=r.headers.get(kn);if(!e||!e.match(Ff))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Vf(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function qf(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var zf=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};const Pt=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Zf=[502,503,504];async function Ba(r){var e;if(!Nf(r))throw new Tn(Pt(r),0);if(Zf.includes(r.status))throw new Tn(Pt(r),r.status);let t;try{t=await r.json()}catch(a){throw new Po(Pt(a),a)}let s;const n=Bf(r);if(n&&n.getTime()>=Co["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Da(Pt(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new lt}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new Da(Pt(t),r.status,t.weak_password.reasons);throw new bf(Pt(t),r.status||500,s)}const Hf=(r,e,t,s)=>{const n={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),t))};async function z(r,e,t,s){var n;const a=Object.assign({},s==null?void 0:s.headers);a[kn]||(a[kn]=Co["2024-01-01"].name),s!=null&&s.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const i=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(i.redirect_to=s.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await Kf(r,e,t+o,{headers:a,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Kf(r,e,t,s,n,a){const i=Hf(e,s,n,a);let o;try{o=await r(t,Object.assign({},i))}catch(c){throw console.error(c),new Tn(Pt(c),0)}if(o.ok||await Ba(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(c){await Ba(c)}}function ut(r){var e;let t=null;Qf(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Rf(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function Va(r){const e=ut(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function ht(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Gf(r){return{data:r,error:null}}function Wf(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:a}=r,i=zf(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:s,redirect_to:n,verification_type:a},c=Object.assign({},i);return{data:{properties:o,user:c},error:null}}function Jf(r){return r}function Qf(r){return r.access_token&&r.refresh_token&&r.expires_in}var Yf=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t};class Xf{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Ao(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await z(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await z(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ht})}catch(s){if(D(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Yf(e,["options"]),n=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Wf,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(D(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await z(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ht})}catch(t){if(D(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,n,a,i,o,c;try{const l={nextPage:null,lastPage:0,total:0},u=await z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(a=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""},xform:Jf});if(u.error)throw u.error;const f=await u.json(),h=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,v=(c=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(w=>{const g=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(w.split(";")[1].split("=")[1]);l[`${p}Page`]=g}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},f),l),error:null}}catch(l){if(D(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){try{return await z(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ht})}catch(t){if(D(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await z(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ht})}catch(s){if(D(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await z(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ht})}catch(s){if(D(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await z(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:s}}catch(t){if(D(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await z(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}}}const ep={getItem:r=>Sr()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{Sr()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{Sr()&&globalThis.localStorage.removeItem(r)}};function qa(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function tp(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Zt={debug:!!(globalThis&&Sr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class No extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class rp extends No{}async function sp(r,e,t){Zt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Zt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){Zt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,n.name);try{return await t()}finally{Zt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,n.name)}}else{if(e===0)throw Zt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new rp(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Zt.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}tp();const np={url:mf,storageKey:gf,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vf,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function za(r,e,t){return await t()}class Pr{constructor(e){var t,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Pr.nextInstanceID,Pr.nextInstanceID+=1,this.instanceID>0&&He()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},np),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Xf({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Ao(n.fetch),this.lock=n.lock||za,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:He()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=sp:this.lock=za,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Sr()?this.storage=ep:(this.memoryStorage={},this.storage=qa(this.memoryStorage)):(this.memoryStorage={},this.storage=qa(this.memoryStorage)),He()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${jo}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Of(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),He()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:a}=await this._getSessionFromURL(t,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),kf(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",o),await this._saveSession(i),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return D(t)?{error:t}:{error:new Po("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,n;try{const a=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:ut}),{data:i,error:o}=a;if(o||!i)return{data:{user:null,session:null},error:o};const c=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(a){if(D(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,s,n;try{let a;if("email"in e){const{email:u,password:f,options:h}=e;let v=null,w=null;this.flowType==="pkce"&&([v,w]=await zt(this.storage,this.storageKey)),a=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:f,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:v,code_challenge_method:w},xform:ut})}else if("phone"in e){const{phone:u,password:f,options:h}=e;a=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},channel:(n=h==null?void 0:h.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ut})}else throw new ts("You must provide either an email or phone number and a password");const{data:i,error:o}=a;if(o||!i)return{data:{user:null,session:null},error:o};const c=i.session,l=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(a){if(D(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:i,options:o}=e;t=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Va})}else if("phone"in e){const{phone:a,password:i,options:o}=e;t=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Va})}else throw new ts("You must provide either an email or phone number and a password");const{data:s,error:n}=t;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new en}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,n,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await ss(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(t??"").split("/");try{const{data:a,error:i}=await z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:ut});if(await ns(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new en}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:n??null}),error:i})}catch(a){if(D(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:s,token:n,access_token:a,nonce:i}=e,o=await z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:ut}),{data:c,error:l}=o;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new en}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,n,a,i;try{if("email"in e){const{email:o,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await zt(this.storage,this.storageKey));const{error:f}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:o,options:c}=e,{data:l,error:u}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new ts("You must provide either an email or phone number.")}catch(o){if(D(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,s;try{let n,a;"options"in e&&(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:i,error:o}=await z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:ut});if(o)throw o;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,l=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(n){if(D(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,s,n;try{let a=null,i=null;return this.flowType==="pkce"&&([a,i]=await zt(this.storage,this.storageKey)),await z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:Gf})}catch(a){if(D(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new lt;const{error:n}=await z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(D(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:a}=e,{error:i}=await z(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in e){const{phone:s,type:n,options:a}=e,{data:i,error:o}=await z(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:o}}throw new ts("You must provide either an email or phone number and a type")}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ss(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Xs:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let i=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,u)=>(!i&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:e},error:null}}const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ht}):await this._useSession(async t=>{var s,n,a;const{data:i,error:o}=t;if(o)throw o;return!(!((s=i.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new lt}:await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0,xform:ht})})}catch(t){if(D(t))return xf(t)&&(await this._removeSession(),await ns(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:n,error:a}=s;if(a)throw a;if(!n.session)throw new lt;const i=n.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await zt(this.storage,this.storageKey));const{data:l,error:u}=await z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:i.access_token,xform:ht});if(u)throw u;return i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(s){if(D(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new lt;const t=Date.now()/1e3;let s=t,n=!0,a=null;const{payload:i}=rn(e.access_token);if(i.exp&&(s=i.exp,n=s<=t),n){const{session:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(D(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:i,error:o}=t;if(o)throw o;e=(s=i.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new lt;const{session:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!He())throw new rs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new rs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new La("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new rs("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new La("No code detected.");const{data:b,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:a,refresh_token:i,expires_in:o,expires_at:c,token_type:l}=e;if(!a||!o||!i||!l)throw new rs("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(o);let h=u+f;c&&(h=parseInt(c));const v=h-u;v*1e3<=Ht&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${f}s`);const w=h-f;u-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,h,u):u-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,h,u);const{data:g,error:p}=await this._getUser(a);if(p)throw p;const y={provider_token:s,provider_refresh_token:n,access_token:a,expires_in:f,expires_at:h,refresh_token:i,token_type:l,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(s){if(D(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ss(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:n,error:a}=t;if(a)return{error:a};const i=(s=n.session)===null||s===void 0?void 0:s.access_token;if(i){const{error:o}=await this.admin.signOut(i,e);if(o&&!(_f(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await ns(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Af(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,n;try{const{data:{session:a},error:i}=t;if(i)throw i;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await zt(this.storage,this.storageKey,!0));try{return await z(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(D(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:n}=await this._useSession(async a=>{var i,o,c,l,u;const{data:f,error:h}=a;if(h)throw h;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await z(this.fetch,"GET",v,{headers:this.headers,jwt:(u=(l=f.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return He()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(D(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,n;const{data:a,error:i}=t;if(i)throw i;return await z(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(t){if(D(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await $f(async n=>(n>0&&await If(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ut})),(n,a)=>{const i=200*Math.pow(2,n);return a&&tn(a)&&Date.now()+i-s<Ht})}catch(s){if(this._debug(t,"error",s),D(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),He()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await ss(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const n=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Xs;if(this._debug(t,`session has${n?"":" not"} expired with margin of ${Xs}s`),n){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),tn(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new lt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Fs;const{data:a,error:i}=await this._refreshAccessToken(e);if(i)throw i;if(!a.session)throw new lt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={session:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(n,"error",a),D(a)){const i={session:null,error:a};return tn(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(i),i}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Oo(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ns(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&He()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ht);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/Ht);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Ht}ms, refresh threshold is ${xn} ticks`),n<=xn&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof No)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!He()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const n=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,i]=await zt(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});n.push(o.toString())}if(s!=null&&s.queryParams){const a=new URLSearchParams(s.queryParams);n.push(a.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;return a?{data:null,error:a}:await z(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(D(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,n;const{data:a,error:i}=t;if(i)return{data:null,error:i};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=await z(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(D(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;if(a)return{data:null,error:a};const{data:i,error:o}=await z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:o})})}catch(t){if(D(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:n,error:a}=t;return a?{data:null,error:a}:await z(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(D(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],n=s.filter(i=>i.factor_type==="totp"&&i.status==="verified"),a=s.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:s,totp:n,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:n},error:a}=e;if(a)return{data:null,error:a};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=rn(n.access_token);let o=null;i.aal&&(o=i.aal);let c=o;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(i=>i.kid===e);if(s||(s=this.jwks.keys.find(i=>i.kid===e),s&&this.jwks_cached_at+wf>Date.now()))return s;const{data:n,error:a}=await z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!n.keys||n.keys.length===0)throw new Er("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),s=n.keys.find(i=>i.kid===e),!s)throw new Er("No matching signing key found in JWKS");return s}async getClaims(e,t={keys:[]}){try{let s=e;if(!s){const{data:v,error:w}=await this.getSession();if(w||!v.session)return{data:null,error:w};s=v.session.access_token}const{header:n,payload:a,signature:i,raw:{header:o,payload:c}}=rn(s);if(Vf(a.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:v}=await this.getUser(s);if(v)throw v;return{data:{claims:a,header:n,signature:i},error:null}}const l=qf(n.alg),u=await this.fetchJwk(n.kid,t),f=await crypto.subtle.importKey("jwk",u,l,!0,["verify"]);if(!await crypto.subtle.verify(l,f,i,Pf(`${o}.${c}`)))throw new Er("Invalid JWT signature");return{data:{claims:a,header:n,signature:i},error:null}}catch(s){if(D(s))return{data:null,error:s};throw s}}}Pr.nextInstanceID=0;const ap=Pr;class ip extends ap{constructor(e){super(e)}}var op=function(r,e,t,s){function n(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function o(u){try{l(s.next(u))}catch(f){i(f)}}function c(u){try{l(s.throw(u))}catch(f){i(f)}}function l(u){u.done?a(u.value):n(u.value).then(o,c)}l((s=s.apply(r,e||[])).next())})};class cp{constructor(e,t,s){var n,a,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=ff(e),c=new URL(o);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:nf,realtime:of,auth:Object.assign(Object.assign({},af),{storageKey:l}),global:sf},f=pf(s??{},u);this.storageKey=(n=f.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=f.auth)!==null&&i!==void 0?i:{},this.headers,f.global.fetch),this.fetch=df(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new Sh(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new rh(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ef(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return op(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,storageKey:a,flowType:i,lock:o,debug:c},l,u){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ip({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),l),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,flowType:i,lock:o,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Fh(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const lp=(r,e,t)=>new cp(r,e,t),up=void 0,dp=void 0;throw new Error("Missing Supabase environment variables. Please check your .env file.");const H=lp(up,dp),Io=()=>{const[r,e]=m.useState([]),[t,s]=m.useState(null),[n,a]=m.useState(!0),[i,o]=m.useState(null),c=async()=>{try{const{data:{user:g}}=await H.auth.getUser();if(!g)return;const{data:p,error:y}=await H.from("automation_jobs").select("*").order("created_at",{ascending:!1}).limit(10);if(y)throw y;e(p||[]);const b=p==null?void 0:p.find(x=>x.status==="running");o(b||null)}catch(g){pe.error("Failed to fetch automation jobs",g),B.error("Failed to load automation jobs")}},l=async()=>{try{const{data:{user:g}}=await H.auth.getUser();if(!g)return;const{data:p,error:y}=await H.from("automation_settings").select("*").single();if(y&&y.code!=="PGRST116")throw y;if(p)s(p);else{const{data:b,error:x}=await H.from("automation_settings").insert([{user_id:g.id}]).select().single();if(x)throw x;s(b)}}catch(g){console.error("Error fetching automation settings:",g),B.error("Failed to load automation settings")}finally{a(!1)}},u=async(g,p)=>{try{const{data:{user:y}}=await H.auth.getUser();if(!y)throw new Error("User not authenticated");pe.info("Creating automation job",{jobType:g});const{data:b,error:x}=await H.from("automation_jobs").insert([{user_id:y.id,job_type:g,content_idea_id:p,current_step:"Initializing...",progress:0,status:"running"}]).select().single();if(x)throw x;if(b)return e(T=>[b,...T]),o(b),console.log("Automation job created:",b),B.success(`${g.replace("_"," ")} automation started`),b}catch(y){throw console.error("Error creating automation job:",y),B.error("Failed to start automation"),y}},f=async(g,p,y,b,x)=>{try{console.log("Updating job progress:",{jobId:g,status:p,step:y,progress:b,errorMsg:x});const{error:T}=await H.rpc("update_automation_job_progress",{job_id:g,new_status:p,new_step:y,new_progress:b,error_msg:x});if(T)throw T;e(E=>E.map(V=>V.id===g?{...V,status:p,current_step:y||V.current_step,progress:b!==void 0?b:V.progress,error_message:x||V.error_message}:V)),(i==null?void 0:i.id)===g&&o(E=>E?{...E,status:p,current_step:y||E.current_step,progress:b!==void 0?b:E.progress,error_message:x||E.error_message}:null),(p==="completed"||p==="failed")&&setTimeout(()=>o(null),2e3)}catch(T){console.error("Error updating job progress:",T)}},h=async g=>{try{const{data:{user:p}}=await H.auth.getUser();if(!p)throw new Error("User not authenticated");const{data:y,error:b}=await H.from("automation_settings").update(g).eq("user_id",p.id).select().single();if(b)throw b;y&&(s(y),B.success("Automation settings updated"))}catch(p){console.error("Error updating automation settings:",p),B.error("Failed to update settings")}},v=async()=>{if(!t){B.error("Settings not loaded");return}console.log("Starting automation with settings:",t),await h({is_enabled:!0}),await u("full_pipeline")},w=async()=>{t&&(console.log("Pausing automation"),await h({is_enabled:!1}),i&&i.status==="running"&&(await f(i.id,"paused","Automation paused by user"),o(null)))};return m.useEffect(()=>{c(),l()},[]),{jobs:r,settings:t,currentJob:i,loading:n,createJob:u,updateJobProgress:f,updateSettings:h,startAutomation:v,pauseAutomation:w,refetch:()=>{c(),l()}}};var Z;(function(r){r.assertEqual=n=>n;function e(n){}r.assertIs=e;function t(n){throw new Error}r.assertNever=t,r.arrayToEnum=n=>{const a={};for(const i of n)a[i]=i;return a},r.getValidEnumValues=n=>{const a=r.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),i={};for(const o of a)i[o]=n[o];return r.objectValues(i)},r.objectValues=n=>r.objectKeys(n).map(function(a){return n[a]}),r.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const a=[];for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&a.push(i);return a},r.find=(n,a)=>{for(const i of n)if(a(i))return i},r.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function s(n,a=" | "){return n.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}r.joinValues=s,r.jsonStringifyReplacer=(n,a)=>typeof a=="bigint"?a.toString():a})(Z||(Z={}));var En;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(En||(En={}));const P=Z.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ft=r=>{switch(typeof r){case"undefined":return P.undefined;case"string":return P.string;case"number":return isNaN(r)?P.nan:P.number;case"boolean":return P.boolean;case"function":return P.function;case"bigint":return P.bigint;case"symbol":return P.symbol;case"object":return Array.isArray(r)?P.array:r===null?P.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?P.promise:typeof Map<"u"&&r instanceof Map?P.map:typeof Set<"u"&&r instanceof Set?P.set:typeof Date<"u"&&r instanceof Date?P.date:P.object;default:return P.unknown}},k=Z.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),hp=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class Ne extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(a){return a.message},s={_errors:[]},n=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(n);else if(i.code==="invalid_return_type")n(i.returnTypeError);else if(i.code==="invalid_arguments")n(i.argumentsError);else if(i.path.length===0)s._errors.push(t(i));else{let o=s,c=0;for(;c<i.path.length;){const l=i.path[c];c===i.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(t(i))):o[l]=o[l]||{_errors:[]},o=o[l],c++}}};return n(this),s}static assert(e){if(!(e instanceof Ne))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Z.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}Ne.create=r=>new Ne(r);const lr=(r,e)=>{let t;switch(r.code){case k.invalid_type:r.received===P.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case k.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,Z.jsonStringifyReplacer)}`;break;case k.unrecognized_keys:t=`Unrecognized key(s) in object: ${Z.joinValues(r.keys,", ")}`;break;case k.invalid_union:t="Invalid input";break;case k.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Z.joinValues(r.options)}`;break;case k.invalid_enum_value:t=`Invalid enum value. Expected ${Z.joinValues(r.options)}, received '${r.received}'`;break;case k.invalid_arguments:t="Invalid function arguments";break;case k.invalid_return_type:t="Invalid function return type";break;case k.invalid_date:t="Invalid date";break;case k.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:Z.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case k.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case k.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case k.custom:t="Invalid input";break;case k.invalid_intersection_types:t="Intersection results could not be merged";break;case k.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case k.not_finite:t="Number must be finite";break;default:t=e.defaultError,Z.assertNever(r)}return{message:t}};let $o=lr;function fp(r){$o=r}function ps(){return $o}const ms=r=>{const{data:e,path:t,errorMaps:s,issueData:n}=r,a=[...t,...n.path||[]],i={...n,path:a};if(n.message!==void 0)return{...n,path:a,message:n.message};let o="";const c=s.filter(l=>!!l).slice().reverse();for(const l of c)o=l(i,{data:e,defaultError:o}).message;return{...n,path:a,message:o}},pp=[];function j(r,e){const t=ps(),s=ms({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===lr?void 0:lr].filter(n=>!!n)});r.common.issues.push(s)}class we{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const n of t){if(n.status==="aborted")return I;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const n of t){const a=await n.key,i=await n.value;s.push({key:a,value:i})}return we.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const n of t){const{key:a,value:i}=n;if(a.status==="aborted"||i.status==="aborted")return I;a.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof i.value<"u"||n.alwaysSet)&&(s[a.value]=i.value)}return{status:e.value,value:s}}}const I=Object.freeze({status:"aborted"}),Gt=r=>({status:"dirty",value:r}),ke=r=>({status:"valid",value:r}),Sn=r=>r.status==="aborted",jn=r=>r.status==="dirty",Rr=r=>r.status==="valid",Ar=r=>typeof Promise<"u"&&r instanceof Promise;function gs(r,e,t,s){if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(r)}function Lo(r,e,t,s,n){if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t}var A;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(A||(A={}));var wr,br;class Ye{constructor(e,t,s,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Za=(r,e)=>{if(Rr(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Ne(r.common.issues);return this._error=t,this._error}}};function $(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:n}=r;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(i,o)=>{var c,l;const{message:u}=r;return i.code==="invalid_enum_value"?{message:u??o.defaultError}:typeof o.data>"u"?{message:(c=u??s)!==null&&c!==void 0?c:o.defaultError}:i.code!=="invalid_type"?{message:o.defaultError}:{message:(l=u??t)!==null&&l!==void 0?l:o.defaultError}},description:n}}class U{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ft(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:ft(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new we,ctx:{common:e.parent.common,data:e.data,parsedType:ft(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Ar(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;const n={common:{issues:[],async:(s=t==null?void 0:t.async)!==null&&s!==void 0?s:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ft(e)},a=this._parseSync({data:e,path:n.path,parent:n});return Za(n,a)}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ft(e)},n=this._parse({data:e,path:s.path,parent:s}),a=await(Ar(n)?n:Promise.resolve(n));return Za(s,a)}refine(e,t){const s=n=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(n):t;return this._refinement((n,a)=>{const i=e(n),o=()=>a.addIssue({code:k.custom,...s(n)});return typeof Promise<"u"&&i instanceof Promise?i.then(c=>c?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,t){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof t=="function"?t(s,n):t),!1))}_refinement(e){return new Ve({schema:this,typeName:N.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Qe.create(this,this._def)}nullable(){return Tt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Be.create(this,this._def)}promise(){return dr.create(this,this._def)}or(e){return $r.create([this,e],this._def)}and(e){return Lr.create(this,e,this._def)}transform(e){return new Ve({...$(this._def),schema:this,typeName:N.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Br({...$(this._def),innerType:this,defaultValue:t,typeName:N.ZodDefault})}brand(){return new Hn({typeName:N.ZodBranded,type:this,...$(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Vr({...$(this._def),innerType:this,catchValue:t,typeName:N.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Gr.create(this,e)}readonly(){return qr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const mp=/^c[^\s-]{8,}$/i,gp=/^[0-9a-z]+$/,vp=/^[0-9A-HJKMNP-TV-Z]{26}$/,yp=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,wp=/^[a-z0-9_-]{21}$/i,bp=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,_p=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,xp="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let sn;const kp=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Tp=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Ep=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Do="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Sp=new RegExp(`^${Do}$`);function Mo(r){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`),e}function jp(r){return new RegExp(`^${Mo(r)}$`)}function Uo(r){let e=`${Do}T${Mo(r)}`;const t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Cp(r,e){return!!((e==="v4"||!e)&&kp.test(r)||(e==="v6"||!e)&&Tp.test(r))}class Fe extends U{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==P.string){const a=this._getOrReturnCtx(e);return j(a,{code:k.invalid_type,expected:P.string,received:a.parsedType}),I}const s=new we;let n;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(n=this._getOrReturnCtx(e,n),j(n,{code:k.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="max")e.data.length>a.value&&(n=this._getOrReturnCtx(e,n),j(n,{code:k.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="length"){const i=e.data.length>a.value,o=e.data.length<a.value;(i||o)&&(n=this._getOrReturnCtx(e,n),i?j(n,{code:k.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&j(n,{code:k.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),s.dirty())}else if(a.kind==="email")_p.test(e.data)||(n=this._getOrReturnCtx(e,n),j(n,{validation:"email",code:k.invalid_string,message:a.message}),s.dirty());else if(a.kind==="emoji")sn||(sn=new RegExp(xp,"u")),sn.test(e.data)||(n=this._getOrReturnCtx(e,n),j(n,{validation:"emoji",code:k.invalid_string,message:a.message}),s.dirty());else if(a.kind==="uuid")yp.test(e.data)||(n=this._getOrReturnCtx(e,n),j(n,{validation:"uuid",code:k.invalid_string,message:a.message}),s.dirty());else if(a.kind==="nanoid")wp.test(e.data)||(n=this._getOrReturnCtx(e,n),j(n,{validation:"nanoid",code:k.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid")mp.test(e.data)||(n=this._getOrReturnCtx(e,n),j(n,{validation:"cuid",code:k.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid2")gp.test(e.data)||(n=this._getOrReturnCtx(e,n),j(n,{validation:"cuid2",code:k.invalid_string,message:a.message}),s.dirty());else if(a.kind==="ulid")vp.test(e.data)||(n=this._getOrReturnCtx(e,n),j(n,{validation:"ulid",code:k.invalid_string,message:a.message}),s.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),j(n,{validation:"url",code:k.invalid_string,message:a.message}),s.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),j(n,{validation:"regex",code:k.invalid_string,message:a.message}),s.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(n=this._getOrReturnCtx(e,n),j(n,{code:k.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),s.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(n=this._getOrReturnCtx(e,n),j(n,{code:k.invalid_string,validation:{startsWith:a.value},message:a.message}),s.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(n=this._getOrReturnCtx(e,n),j(n,{code:k.invalid_string,validation:{endsWith:a.value},message:a.message}),s.dirty()):a.kind==="datetime"?Uo(a).test(e.data)||(n=this._getOrReturnCtx(e,n),j(n,{code:k.invalid_string,validation:"datetime",message:a.message}),s.dirty()):a.kind==="date"?Sp.test(e.data)||(n=this._getOrReturnCtx(e,n),j(n,{code:k.invalid_string,validation:"date",message:a.message}),s.dirty()):a.kind==="time"?jp(a).test(e.data)||(n=this._getOrReturnCtx(e,n),j(n,{code:k.invalid_string,validation:"time",message:a.message}),s.dirty()):a.kind==="duration"?bp.test(e.data)||(n=this._getOrReturnCtx(e,n),j(n,{validation:"duration",code:k.invalid_string,message:a.message}),s.dirty()):a.kind==="ip"?Cp(e.data,a.version)||(n=this._getOrReturnCtx(e,n),j(n,{validation:"ip",code:k.invalid_string,message:a.message}),s.dirty()):a.kind==="base64"?Ep.test(e.data)||(n=this._getOrReturnCtx(e,n),j(n,{validation:"base64",code:k.invalid_string,message:a.message}),s.dirty()):Z.assertNever(a);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(n=>e.test(n),{validation:t,code:k.invalid_string,...A.errToObj(s)})}_addCheck(e){return new Fe({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...A.errToObj(e)})}url(e){return this._addCheck({kind:"url",...A.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...A.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...A.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...A.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...A.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...A.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...A.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...A.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...A.errToObj(e)})}datetime(e){var t,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(s=e==null?void 0:e.local)!==null&&s!==void 0?s:!1,...A.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...A.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...A.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...A.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...A.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...A.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...A.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...A.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...A.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...A.errToObj(t)})}nonempty(e){return this.min(1,A.errToObj(e))}trim(){return new Fe({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Fe({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Fe({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Fe.create=r=>{var e;return new Fe({checks:[],typeName:N.ZodString,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...$(r)})};function Pp(r,e){const t=(r.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=t>s?t:s,a=parseInt(r.toFixed(n).replace(".","")),i=parseInt(e.toFixed(n).replace(".",""));return a%i/Math.pow(10,n)}class _t extends U{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==P.number){const a=this._getOrReturnCtx(e);return j(a,{code:k.invalid_type,expected:P.number,received:a.parsedType}),I}let s;const n=new we;for(const a of this._def.checks)a.kind==="int"?Z.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),j(s,{code:k.invalid_type,expected:"integer",received:"float",message:a.message}),n.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(s=this._getOrReturnCtx(e,s),j(s,{code:k.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(s=this._getOrReturnCtx(e,s),j(s,{code:k.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):a.kind==="multipleOf"?Pp(e.data,a.value)!==0&&(s=this._getOrReturnCtx(e,s),j(s,{code:k.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),j(s,{code:k.not_finite,message:a.message}),n.dirty()):Z.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,A.toString(t))}gt(e,t){return this.setLimit("min",e,!1,A.toString(t))}lte(e,t){return this.setLimit("max",e,!0,A.toString(t))}lt(e,t){return this.setLimit("max",e,!1,A.toString(t))}setLimit(e,t,s,n){return new _t({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:A.toString(n)}]})}_addCheck(e){return new _t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:A.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:A.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:A.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:A.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:A.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:A.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:A.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:A.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:A.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Z.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}_t.create=r=>new _t({checks:[],typeName:N.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...$(r)});class xt extends U{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==P.bigint){const a=this._getOrReturnCtx(e);return j(a,{code:k.invalid_type,expected:P.bigint,received:a.parsedType}),I}let s;const n=new we;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(s=this._getOrReturnCtx(e,s),j(s,{code:k.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(s=this._getOrReturnCtx(e,s),j(s,{code:k.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),j(s,{code:k.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):Z.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,A.toString(t))}gt(e,t){return this.setLimit("min",e,!1,A.toString(t))}lte(e,t){return this.setLimit("max",e,!0,A.toString(t))}lt(e,t){return this.setLimit("max",e,!1,A.toString(t))}setLimit(e,t,s,n){return new xt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:A.toString(n)}]})}_addCheck(e){return new xt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:A.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:A.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:A.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:A.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:A.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}xt.create=r=>{var e;return new xt({checks:[],typeName:N.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!==null&&e!==void 0?e:!1,...$(r)})};class Or extends U{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==P.boolean){const s=this._getOrReturnCtx(e);return j(s,{code:k.invalid_type,expected:P.boolean,received:s.parsedType}),I}return ke(e.data)}}Or.create=r=>new Or({typeName:N.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...$(r)});class Lt extends U{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==P.date){const a=this._getOrReturnCtx(e);return j(a,{code:k.invalid_type,expected:P.date,received:a.parsedType}),I}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return j(a,{code:k.invalid_date}),I}const s=new we;let n;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(n=this._getOrReturnCtx(e,n),j(n,{code:k.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),s.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(n=this._getOrReturnCtx(e,n),j(n,{code:k.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),s.dirty()):Z.assertNever(a);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Lt({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:A.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:A.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Lt.create=r=>new Lt({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:N.ZodDate,...$(r)});class vs extends U{_parse(e){if(this._getType(e)!==P.symbol){const s=this._getOrReturnCtx(e);return j(s,{code:k.invalid_type,expected:P.symbol,received:s.parsedType}),I}return ke(e.data)}}vs.create=r=>new vs({typeName:N.ZodSymbol,...$(r)});class Nr extends U{_parse(e){if(this._getType(e)!==P.undefined){const s=this._getOrReturnCtx(e);return j(s,{code:k.invalid_type,expected:P.undefined,received:s.parsedType}),I}return ke(e.data)}}Nr.create=r=>new Nr({typeName:N.ZodUndefined,...$(r)});class Ir extends U{_parse(e){if(this._getType(e)!==P.null){const s=this._getOrReturnCtx(e);return j(s,{code:k.invalid_type,expected:P.null,received:s.parsedType}),I}return ke(e.data)}}Ir.create=r=>new Ir({typeName:N.ZodNull,...$(r)});class ur extends U{constructor(){super(...arguments),this._any=!0}_parse(e){return ke(e.data)}}ur.create=r=>new ur({typeName:N.ZodAny,...$(r)});class $t extends U{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ke(e.data)}}$t.create=r=>new $t({typeName:N.ZodUnknown,...$(r)});class it extends U{_parse(e){const t=this._getOrReturnCtx(e);return j(t,{code:k.invalid_type,expected:P.never,received:t.parsedType}),I}}it.create=r=>new it({typeName:N.ZodNever,...$(r)});class ys extends U{_parse(e){if(this._getType(e)!==P.undefined){const s=this._getOrReturnCtx(e);return j(s,{code:k.invalid_type,expected:P.void,received:s.parsedType}),I}return ke(e.data)}}ys.create=r=>new ys({typeName:N.ZodVoid,...$(r)});class Be extends U{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),n=this._def;if(t.parsedType!==P.array)return j(t,{code:k.invalid_type,expected:P.array,received:t.parsedType}),I;if(n.exactLength!==null){const i=t.data.length>n.exactLength.value,o=t.data.length<n.exactLength.value;(i||o)&&(j(t,{code:i?k.too_big:k.too_small,minimum:o?n.exactLength.value:void 0,maximum:i?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&t.data.length<n.minLength.value&&(j(t,{code:k.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&t.data.length>n.maxLength.value&&(j(t,{code:k.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((i,o)=>n.type._parseAsync(new Ye(t,i,t.path,o)))).then(i=>we.mergeArray(s,i));const a=[...t.data].map((i,o)=>n.type._parseSync(new Ye(t,i,t.path,o)));return we.mergeArray(s,a)}get element(){return this._def.type}min(e,t){return new Be({...this._def,minLength:{value:e,message:A.toString(t)}})}max(e,t){return new Be({...this._def,maxLength:{value:e,message:A.toString(t)}})}length(e,t){return new Be({...this._def,exactLength:{value:e,message:A.toString(t)}})}nonempty(e){return this.min(1,e)}}Be.create=(r,e)=>new Be({type:r,minLength:null,maxLength:null,exactLength:null,typeName:N.ZodArray,...$(e)});function Kt(r){if(r instanceof ie){const e={};for(const t in r.shape){const s=r.shape[t];e[t]=Qe.create(Kt(s))}return new ie({...r._def,shape:()=>e})}else return r instanceof Be?new Be({...r._def,type:Kt(r.element)}):r instanceof Qe?Qe.create(Kt(r.unwrap())):r instanceof Tt?Tt.create(Kt(r.unwrap())):r instanceof Xe?Xe.create(r.items.map(e=>Kt(e))):r}class ie extends U{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Z.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==P.object){const l=this._getOrReturnCtx(e);return j(l,{code:k.invalid_type,expected:P.object,received:l.parsedType}),I}const{status:s,ctx:n}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof it&&this._def.unknownKeys==="strip"))for(const l in n.data)i.includes(l)||o.push(l);const c=[];for(const l of i){const u=a[l],f=n.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Ye(n,f,n.path,l)),alwaysSet:l in n.data})}if(this._def.catchall instanceof it){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:n.data[u]}});else if(l==="strict")o.length>0&&(j(n,{code:k.unrecognized_keys,keys:o}),s.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of o){const f=n.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Ye(n,f,n.path,u)),alwaysSet:u in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const f=await u.key,h=await u.value;l.push({key:f,value:h,alwaysSet:u.alwaysSet})}return l}).then(l=>we.mergeObjectSync(s,l)):we.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(e){return A.errToObj,new ie({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var n,a,i,o;const c=(i=(a=(n=this._def).errorMap)===null||a===void 0?void 0:a.call(n,t,s).message)!==null&&i!==void 0?i:s.defaultError;return t.code==="unrecognized_keys"?{message:(o=A.errToObj(e).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new ie({...this._def,unknownKeys:"strip"})}passthrough(){return new ie({...this._def,unknownKeys:"passthrough"})}extend(e){return new ie({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ie({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:N.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ie({...this._def,catchall:e})}pick(e){const t={};return Z.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new ie({...this._def,shape:()=>t})}omit(e){const t={};return Z.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new ie({...this._def,shape:()=>t})}deepPartial(){return Kt(this)}partial(e){const t={};return Z.objectKeys(this.shape).forEach(s=>{const n=this.shape[s];e&&!e[s]?t[s]=n:t[s]=n.optional()}),new ie({...this._def,shape:()=>t})}required(e){const t={};return Z.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let a=this.shape[s];for(;a instanceof Qe;)a=a._def.innerType;t[s]=a}}),new ie({...this._def,shape:()=>t})}keyof(){return Fo(Z.objectKeys(this.shape))}}ie.create=(r,e)=>new ie({shape:()=>r,unknownKeys:"strip",catchall:it.create(),typeName:N.ZodObject,...$(e)});ie.strictCreate=(r,e)=>new ie({shape:()=>r,unknownKeys:"strict",catchall:it.create(),typeName:N.ZodObject,...$(e)});ie.lazycreate=(r,e)=>new ie({shape:r,unknownKeys:"strip",catchall:it.create(),typeName:N.ZodObject,...$(e)});class $r extends U{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function n(a){for(const o of a)if(o.result.status==="valid")return o.result;for(const o of a)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const i=a.map(o=>new Ne(o.ctx.common.issues));return j(t,{code:k.invalid_union,unionErrors:i}),I}if(t.common.async)return Promise.all(s.map(async a=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(n);{let a;const i=[];for(const c of s){const l={...t,common:{...t.common,issues:[]},parent:null},u=c._parseSync({data:t.data,path:t.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!a&&(a={result:u,ctx:l}),l.common.issues.length&&i.push(l.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(c=>new Ne(c));return j(t,{code:k.invalid_union,unionErrors:o}),I}}get options(){return this._def.options}}$r.create=(r,e)=>new $r({options:r,typeName:N.ZodUnion,...$(e)});const tt=r=>r instanceof Mr?tt(r.schema):r instanceof Ve?tt(r.innerType()):r instanceof Ur?[r.value]:r instanceof kt?r.options:r instanceof Fr?Z.objectValues(r.enum):r instanceof Br?tt(r._def.innerType):r instanceof Nr?[void 0]:r instanceof Ir?[null]:r instanceof Qe?[void 0,...tt(r.unwrap())]:r instanceof Tt?[null,...tt(r.unwrap())]:r instanceof Hn||r instanceof qr?tt(r.unwrap()):r instanceof Vr?tt(r._def.innerType):[];class Bs extends U{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==P.object)return j(t,{code:k.invalid_type,expected:P.object,received:t.parsedType}),I;const s=this.discriminator,n=t.data[s],a=this.optionsMap.get(n);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(j(t,{code:k.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),I)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){const n=new Map;for(const a of t){const i=tt(a.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of i){if(n.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,a)}}return new Bs({typeName:N.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...$(s)})}}function Cn(r,e){const t=ft(r),s=ft(e);if(r===e)return{valid:!0,data:r};if(t===P.object&&s===P.object){const n=Z.objectKeys(e),a=Z.objectKeys(r).filter(o=>n.indexOf(o)!==-1),i={...r,...e};for(const o of a){const c=Cn(r[o],e[o]);if(!c.valid)return{valid:!1};i[o]=c.data}return{valid:!0,data:i}}else if(t===P.array&&s===P.array){if(r.length!==e.length)return{valid:!1};const n=[];for(let a=0;a<r.length;a++){const i=r[a],o=e[a],c=Cn(i,o);if(!c.valid)return{valid:!1};n.push(c.data)}return{valid:!0,data:n}}else return t===P.date&&s===P.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class Lr extends U{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=(a,i)=>{if(Sn(a)||Sn(i))return I;const o=Cn(a.value,i.value);return o.valid?((jn(a)||jn(i))&&t.dirty(),{status:t.value,value:o.data}):(j(s,{code:k.invalid_intersection_types}),I)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([a,i])=>n(a,i)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}Lr.create=(r,e,t)=>new Lr({left:r,right:e,typeName:N.ZodIntersection,...$(t)});class Xe extends U{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==P.array)return j(s,{code:k.invalid_type,expected:P.array,received:s.parsedType}),I;if(s.data.length<this._def.items.length)return j(s,{code:k.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),I;!this._def.rest&&s.data.length>this._def.items.length&&(j(s,{code:k.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...s.data].map((i,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new Ye(s,i,s.path,o)):null}).filter(i=>!!i);return s.common.async?Promise.all(a).then(i=>we.mergeArray(t,i)):we.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new Xe({...this._def,rest:e})}}Xe.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Xe({items:r,typeName:N.ZodTuple,rest:null,...$(e)})};class Dr extends U{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==P.object)return j(s,{code:k.invalid_type,expected:P.object,received:s.parsedType}),I;const n=[],a=this._def.keyType,i=this._def.valueType;for(const o in s.data)n.push({key:a._parse(new Ye(s,o,s.path,o)),value:i._parse(new Ye(s,s.data[o],s.path,o)),alwaysSet:o in s.data});return s.common.async?we.mergeObjectAsync(t,n):we.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof U?new Dr({keyType:e,valueType:t,typeName:N.ZodRecord,...$(s)}):new Dr({keyType:Fe.create(),valueType:e,typeName:N.ZodRecord,...$(t)})}}class ws extends U{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==P.map)return j(s,{code:k.invalid_type,expected:P.map,received:s.parsedType}),I;const n=this._def.keyType,a=this._def.valueType,i=[...s.data.entries()].map(([o,c],l)=>({key:n._parse(new Ye(s,o,s.path,[l,"key"])),value:a._parse(new Ye(s,c,s.path,[l,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of i){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return I;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(l.value,u.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const c of i){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return I;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(l.value,u.value)}return{status:t.value,value:o}}}}ws.create=(r,e,t)=>new ws({valueType:e,keyType:r,typeName:N.ZodMap,...$(t)});class Dt extends U{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==P.set)return j(s,{code:k.invalid_type,expected:P.set,received:s.parsedType}),I;const n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(j(s,{code:k.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(j(s,{code:k.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const a=this._def.valueType;function i(c){const l=new Set;for(const u of c){if(u.status==="aborted")return I;u.status==="dirty"&&t.dirty(),l.add(u.value)}return{status:t.value,value:l}}const o=[...s.data.values()].map((c,l)=>a._parse(new Ye(s,c,s.path,l)));return s.common.async?Promise.all(o).then(c=>i(c)):i(o)}min(e,t){return new Dt({...this._def,minSize:{value:e,message:A.toString(t)}})}max(e,t){return new Dt({...this._def,maxSize:{value:e,message:A.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Dt.create=(r,e)=>new Dt({valueType:r,minSize:null,maxSize:null,typeName:N.ZodSet,...$(e)});class Qt extends U{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==P.function)return j(t,{code:k.invalid_type,expected:P.function,received:t.parsedType}),I;function s(o,c){return ms({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ps(),lr].filter(l=>!!l),issueData:{code:k.invalid_arguments,argumentsError:c}})}function n(o,c){return ms({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ps(),lr].filter(l=>!!l),issueData:{code:k.invalid_return_type,returnTypeError:c}})}const a={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof dr){const o=this;return ke(async function(...c){const l=new Ne([]),u=await o._def.args.parseAsync(c,a).catch(v=>{throw l.addIssue(s(c,v)),l}),f=await Reflect.apply(i,this,u);return await o._def.returns._def.type.parseAsync(f,a).catch(v=>{throw l.addIssue(n(f,v)),l})})}else{const o=this;return ke(function(...c){const l=o._def.args.safeParse(c,a);if(!l.success)throw new Ne([s(c,l.error)]);const u=Reflect.apply(i,this,l.data),f=o._def.returns.safeParse(u,a);if(!f.success)throw new Ne([n(u,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Qt({...this._def,args:Xe.create(e).rest($t.create())})}returns(e){return new Qt({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new Qt({args:e||Xe.create([]).rest($t.create()),returns:t||$t.create(),typeName:N.ZodFunction,...$(s)})}}class Mr extends U{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Mr.create=(r,e)=>new Mr({getter:r,typeName:N.ZodLazy,...$(e)});class Ur extends U{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return j(t,{received:t.data,code:k.invalid_literal,expected:this._def.value}),I}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ur.create=(r,e)=>new Ur({value:r,typeName:N.ZodLiteral,...$(e)});function Fo(r,e){return new kt({values:r,typeName:N.ZodEnum,...$(e)})}class kt extends U{constructor(){super(...arguments),wr.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return j(t,{expected:Z.joinValues(s),received:t.parsedType,code:k.invalid_type}),I}if(gs(this,wr)||Lo(this,wr,new Set(this._def.values)),!gs(this,wr).has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return j(t,{received:t.data,code:k.invalid_enum_value,options:s}),I}return ke(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return kt.create(e,{...this._def,...t})}exclude(e,t=this._def){return kt.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}}wr=new WeakMap;kt.create=Fo;class Fr extends U{constructor(){super(...arguments),br.set(this,void 0)}_parse(e){const t=Z.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==P.string&&s.parsedType!==P.number){const n=Z.objectValues(t);return j(s,{expected:Z.joinValues(n),received:s.parsedType,code:k.invalid_type}),I}if(gs(this,br)||Lo(this,br,new Set(Z.getValidEnumValues(this._def.values))),!gs(this,br).has(e.data)){const n=Z.objectValues(t);return j(s,{received:s.data,code:k.invalid_enum_value,options:n}),I}return ke(e.data)}get enum(){return this._def.values}}br=new WeakMap;Fr.create=(r,e)=>new Fr({values:r,typeName:N.ZodNativeEnum,...$(e)});class dr extends U{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==P.promise&&t.common.async===!1)return j(t,{code:k.invalid_type,expected:P.promise,received:t.parsedType}),I;const s=t.parsedType===P.promise?t.data:Promise.resolve(t.data);return ke(s.then(n=>this._def.type.parseAsync(n,{path:t.path,errorMap:t.common.contextualErrorMap})))}}dr.create=(r,e)=>new dr({type:r,typeName:N.ZodPromise,...$(e)});class Ve extends U{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===N.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=this._def.effect||null,a={addIssue:i=>{j(s,i),i.fatal?t.abort():t.dirty()},get path(){return s.path}};if(a.addIssue=a.addIssue.bind(a),n.type==="preprocess"){const i=n.transform(s.data,a);if(s.common.async)return Promise.resolve(i).then(async o=>{if(t.value==="aborted")return I;const c=await this._def.schema._parseAsync({data:o,path:s.path,parent:s});return c.status==="aborted"?I:c.status==="dirty"||t.value==="dirty"?Gt(c.value):c});{if(t.value==="aborted")return I;const o=this._def.schema._parseSync({data:i,path:s.path,parent:s});return o.status==="aborted"?I:o.status==="dirty"||t.value==="dirty"?Gt(o.value):o}}if(n.type==="refinement"){const i=o=>{const c=n.refinement(o,a);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?I:(o.status==="dirty"&&t.dirty(),i(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?I:(o.status==="dirty"&&t.dirty(),i(o.value).then(()=>({status:t.value,value:o.value}))))}if(n.type==="transform")if(s.common.async===!1){const i=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Rr(i))return i;const o=n.transform(i.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(i=>Rr(i)?Promise.resolve(n.transform(i.value,a)).then(o=>({status:t.value,value:o})):i);Z.assertNever(n)}}Ve.create=(r,e,t)=>new Ve({schema:r,typeName:N.ZodEffects,effect:e,...$(t)});Ve.createWithPreprocess=(r,e,t)=>new Ve({schema:e,effect:{type:"preprocess",transform:r},typeName:N.ZodEffects,...$(t)});class Qe extends U{_parse(e){return this._getType(e)===P.undefined?ke(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Qe.create=(r,e)=>new Qe({innerType:r,typeName:N.ZodOptional,...$(e)});class Tt extends U{_parse(e){return this._getType(e)===P.null?ke(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Tt.create=(r,e)=>new Tt({innerType:r,typeName:N.ZodNullable,...$(e)});class Br extends U{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===P.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Br.create=(r,e)=>new Br({innerType:r,typeName:N.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...$(e)});class Vr extends U{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Ar(n)?n.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ne(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Ne(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Vr.create=(r,e)=>new Vr({innerType:r,typeName:N.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...$(e)});class bs extends U{_parse(e){if(this._getType(e)!==P.nan){const s=this._getOrReturnCtx(e);return j(s,{code:k.invalid_type,expected:P.nan,received:s.parsedType}),I}return{status:"valid",value:e.data}}}bs.create=r=>new bs({typeName:N.ZodNaN,...$(r)});const Rp=Symbol("zod_brand");class Hn extends U{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class Gr extends U{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?I:a.status==="dirty"?(t.dirty(),Gt(a.value)):this._def.out._parseAsync({data:a.value,path:s.path,parent:s})})();{const n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?I:n.status==="dirty"?(t.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,t){return new Gr({in:e,out:t,typeName:N.ZodPipeline})}}class qr extends U{_parse(e){const t=this._def.innerType._parse(e),s=n=>(Rr(n)&&(n.value=Object.freeze(n.value)),n);return Ar(t)?t.then(n=>s(n)):s(t)}unwrap(){return this._def.innerType}}qr.create=(r,e)=>new qr({innerType:r,typeName:N.ZodReadonly,...$(e)});function Bo(r,e={},t){return r?ur.create().superRefine((s,n)=>{var a,i;if(!r(s)){const o=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,c=(i=(a=o.fatal)!==null&&a!==void 0?a:t)!==null&&i!==void 0?i:!0,l=typeof o=="string"?{message:o}:o;n.addIssue({code:"custom",...l,fatal:c})}}):ur.create()}const Ap={object:ie.lazycreate};var N;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(N||(N={}));const Op=(r,e={message:`Input not instance of ${r.name}`})=>Bo(t=>t instanceof r,e),Vo=Fe.create,qo=_t.create,Np=bs.create,Ip=xt.create,zo=Or.create,$p=Lt.create,Lp=vs.create,Dp=Nr.create,Mp=Ir.create,Up=ur.create,Fp=$t.create,Bp=it.create,Vp=ys.create,qp=Be.create,zp=ie.create,Zp=ie.strictCreate,Hp=$r.create,Kp=Bs.create,Gp=Lr.create,Wp=Xe.create,Jp=Dr.create,Qp=ws.create,Yp=Dt.create,Xp=Qt.create,em=Mr.create,tm=Ur.create,rm=kt.create,sm=Fr.create,nm=dr.create,Ha=Ve.create,am=Qe.create,im=Tt.create,om=Ve.createWithPreprocess,cm=Gr.create,lm=()=>Vo().optional(),um=()=>qo().optional(),dm=()=>zo().optional(),hm={string:r=>Fe.create({...r,coerce:!0}),number:r=>_t.create({...r,coerce:!0}),boolean:r=>Or.create({...r,coerce:!0}),bigint:r=>xt.create({...r,coerce:!0}),date:r=>Lt.create({...r,coerce:!0})},fm=I;var Q=Object.freeze({__proto__:null,defaultErrorMap:lr,setErrorMap:fp,getErrorMap:ps,makeIssue:ms,EMPTY_PATH:pp,addIssueToContext:j,ParseStatus:we,INVALID:I,DIRTY:Gt,OK:ke,isAborted:Sn,isDirty:jn,isValid:Rr,isAsync:Ar,get util(){return Z},get objectUtil(){return En},ZodParsedType:P,getParsedType:ft,ZodType:U,datetimeRegex:Uo,ZodString:Fe,ZodNumber:_t,ZodBigInt:xt,ZodBoolean:Or,ZodDate:Lt,ZodSymbol:vs,ZodUndefined:Nr,ZodNull:Ir,ZodAny:ur,ZodUnknown:$t,ZodNever:it,ZodVoid:ys,ZodArray:Be,ZodObject:ie,ZodUnion:$r,ZodDiscriminatedUnion:Bs,ZodIntersection:Lr,ZodTuple:Xe,ZodRecord:Dr,ZodMap:ws,ZodSet:Dt,ZodFunction:Qt,ZodLazy:Mr,ZodLiteral:Ur,ZodEnum:kt,ZodNativeEnum:Fr,ZodPromise:dr,ZodEffects:Ve,ZodTransformer:Ve,ZodOptional:Qe,ZodNullable:Tt,ZodDefault:Br,ZodCatch:Vr,ZodNaN:bs,BRAND:Rp,ZodBranded:Hn,ZodPipeline:Gr,ZodReadonly:qr,custom:Bo,Schema:U,ZodSchema:U,late:Ap,get ZodFirstPartyTypeKind(){return N},coerce:hm,any:Up,array:qp,bigint:Ip,boolean:zo,date:$p,discriminatedUnion:Kp,effect:Ha,enum:rm,function:Xp,instanceof:Op,intersection:Gp,lazy:em,literal:tm,map:Qp,nan:Np,nativeEnum:sm,never:Bp,null:Mp,nullable:im,number:qo,object:zp,oboolean:dm,onumber:um,optional:am,ostring:lm,pipeline:cm,preprocess:om,promise:nm,record:Jp,set:Yp,strictObject:Zp,string:Vo,symbol:Lp,transformer:Ha,tuple:Wp,undefined:Dp,union:Hp,unknown:Fp,void:Vp,NEVER:fm,ZodIssueCode:k,quotelessJson:hp,ZodError:Ne});const pm=Q.object({niche:Q.string().min(1,"Niche is required").max(100,"Niche too long"),targetAudience:Q.string().min(1,"Target audience is required").max(200,"Target audience too long"),contentGoals:Q.string().min(1,"Content goals are required").max(500,"Content goals too long")});Q.object({topic:Q.string().min(1,"Topic is required").max(200,"Topic too long"),duration:Q.enum(["short","medium","long"],{required_error:"Duration is required"}),style:Q.enum(["educational","entertaining","storytelling","tutorial"],{required_error:"Style is required"}),targetAudience:Q.string().min(1,"Target audience is required").max(200,"Target audience too long"),additionalNotes:Q.string().max(1e3,"Additional notes too long").optional()});const mm=Q.object({text:Q.string().min(1,"Text is required").max(5e3,"Text too long for voice generation"),voiceId:Q.string().min(1,"Voice ID is required"),speed:Q.number().min(.5).max(2).default(1)});function gm(r){return r.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/javascript:/gi,"").replace(/on\w+\s*=/gi,"").trim()}function cs(r){return r.replace(/[<>\"'&]/g,"").replace(/\s+/g," ").trim()}function vm(r){const e=pm.parse(r);return{niche:cs(e.niche),targetAudience:cs(e.targetAudience),contentGoals:cs(e.contentGoals)}}function ym(r){const e=mm.parse(r);return{...e,text:gm(e.text),voiceId:cs(e.voiceId)}}const wm=Q.array(Q.object({title:Q.string().min(1).max(200),estimatedViews:Q.string().min(1).max(50),competition:Q.enum(["Low","Medium","High"]),keywords:Q.array(Q.string()).min(1).max(10),difficulty:Q.enum(["Beginner","Intermediate","Advanced"]),description:Q.string().min(1).max(1e3)}));Q.object({script:Q.string().min(1).max(1e4),estimatedDuration:Q.string().optional(),keyPoints:Q.array(Q.string()).optional()});function bm(r,e){try{return r.parse(e)}catch(t){throw t instanceof Q.ZodError?new Error(`AI response validation failed: ${t.errors.map(s=>s.message).join(", ")}`):t}}class Kn{constructor(e){jt(this,"requests",new Map);jt(this,"config");this.config=e,setInterval(()=>this.cleanup(),6e4)}cleanup(){const e=Date.now();for(const[t,s]of this.requests.entries())e>s.resetTime&&this.requests.delete(t)}getKey(e){return this.config.keyGenerator?this.config.keyGenerator(e):"default"}async checkLimit(e={}){const t=this.getKey(e),s=Date.now();let n=this.requests.get(t);(!n||s>n.resetTime)&&(n={count:0,resetTime:s+this.config.windowMs},this.requests.set(t,n));const a=n.count<this.config.maxRequests;return a?(n.count++,pe.debug("Rate limit check passed",{key:t,count:n.count,maxRequests:this.config.maxRequests,remaining:this.config.maxRequests-n.count})):pe.warn("Rate limit exceeded",{key:t,count:n.count,maxRequests:this.config.maxRequests,resetTime:n.resetTime}),{allowed:a,remaining:Math.max(0,this.config.maxRequests-n.count),resetTime:n.resetTime}}async waitForReset(e={}){const t=this.getKey(e),s=this.requests.get(t);if(s){const n=Math.max(0,s.resetTime-Date.now());n>0&&(pe.info("Waiting for rate limit reset",{key:t,waitTime:n}),await new Promise(a=>setTimeout(a,n)))}}}const _m=new Kn({maxRequests:10,windowMs:60*1e3,keyGenerator:r=>`openai:${r.userId||"anonymous"}`}),xm=new Kn({maxRequests:5,windowMs:60*1e3,keyGenerator:r=>`elevenlabs:${r.userId||"anonymous"}`});new Kn({maxRequests:20,windowMs:60*1e3,keyGenerator:r=>`ai:${r.userId||"anonymous"}`});class Pn extends Error{constructor(t,s,n){super(t);jt(this,"resetTime");jt(this,"remaining");this.name="RateLimitError",this.resetTime=s,this.remaining=n}}async function Ka(r,e={},t=!1){const s=await r.checkLimit(e);if(!s.allowed){if(t){await r.waitForReset(e);return}throw new Pn(`Rate limit exceeded. Try again in ${Math.ceil((s.resetTime-Date.now())/1e3)} seconds.`,s.resetTime,s.remaining)}}const Zo=()=>{const[r,e]=m.useState(null),[t,s]=m.useState(!0);return m.useEffect(()=>{(async()=>{try{const{data:{session:o},error:c}=await H.auth.getSession();if(c)throw pe.error("Failed to get auth session",c),c;e((o==null?void 0:o.user)||null)}catch(o){pe.error("Auth session error",o),B.error("Failed to load user session")}finally{s(!1)}})();const{data:{subscription:i}}=H.auth.onAuthStateChange((o,c)=>{var l;pe.info("Auth state changed",{event:o,userId:(l=c==null?void 0:c.user)==null?void 0:l.id}),e((c==null?void 0:c.user)||null),o==="SIGNED_IN"?B.success("Welcome back!"):o==="SIGNED_OUT"&&B.success("Signed out successfully")});return()=>{i.unsubscribe()}},[]),{user:r,loading:t,signOut:async()=>{try{pe.info("User signing out",{userId:r==null?void 0:r.id});const{error:a}=await H.auth.signOut();if(a)throw a}catch(a){pe.error("Sign out failed",a),B.error("Failed to sign out")}},isAuthenticated:!!r}},km=()=>{const{user:r}=Zo();return{generateContentIdeas:async(i,o,c)=>{try{await Ka(_m,{userId:r==null?void 0:r.id});const l=vm({niche:i,targetAudience:o,contentGoals:c});pe.info("Generating content ideas",{niche:l.niche,userId:r==null?void 0:r.id});const{data:u,error:f}=await H.functions.invoke("generate-content-ideas",{body:l});if(f)throw f;const h=bm(wm,u);return pe.info("Content ideas generated successfully",{count:h.length,userId:r==null?void 0:r.id}),h}catch(l){throw l instanceof Pn?(pe.warn("Rate limit hit for content ideas generation",{userId:r==null?void 0:r.id,resetTime:l.resetTime}),new Error(`Too many requests. Please wait ${Math.ceil((l.resetTime-Date.now())/1e3)} seconds before trying again.`)):(pe.error("Failed to generate content ideas",l,{userId:r==null?void 0:r.id}),l)}},generateScript:async(i,o,c,l,u)=>{const{data:f,error:h}=await H.functions.invoke("generate-script",{body:{topic:i,duration:o,style:c,targetAudience:l,additionalNotes:u}});if(h)throw h;return f},generateVoice:async(i,o,c=1)=>{try{await Ka(xm,{userId:r==null?void 0:r.id});const l=ym({text:i,voiceId:o,speed:c});pe.info("Generating voice synthesis",{textLength:i.length,voiceId:o,userId:r==null?void 0:r.id});const{data:u,error:f}=await H.functions.invoke("text-to-speech",{body:l});if(f)throw f;return pe.info("Voice synthesis completed successfully",{userId:r==null?void 0:r.id}),u}catch(l){throw l instanceof Pn?(pe.warn("Rate limit hit for voice synthesis",{userId:r==null?void 0:r.id,resetTime:l.resetTime}),new Error(`Too many voice synthesis requests. Please wait ${Math.ceil((l.resetTime-Date.now())/1e3)} seconds before trying again.`)):(pe.error("Failed to generate voice",l,{userId:r==null?void 0:r.id}),l)}},generateThumbnail:async(i,o="vivid")=>{const{data:c,error:l}=await H.functions.invoke("generate-thumbnail",{body:{title:i,style:o}});if(l)throw l;return c},optimizeSEO:async(i,o,c)=>{const{data:l,error:u}=await H.functions.invoke("optimize-seo",{body:{title:i,script:o,niche:c}});if(u)throw u;return l}}},Tm=()=>{const[r,e]=m.useState([]),[t,s]=m.useState(!0),n=async()=>{try{const{data:{user:o}}=await H.auth.getUser();if(!o)return;const{data:c,error:l}=await H.from("content_ideas").select("*").order("created_at",{ascending:!1});if(l)throw l;e(c||[])}catch(o){console.error("Error fetching content ideas:",o),B.error("Failed to load content ideas")}finally{s(!1)}},a=async o=>{try{const{data:{user:c}}=await H.auth.getUser();if(!c)throw new Error("User not authenticated");const l=o.map(h=>({...h,user_id:c.id})),{data:u,error:f}=await H.from("content_ideas").insert(l).select();if(f)throw f;if(u)return e(h=>[...u,...h]),u}catch(c){throw console.error("Error saving content ideas:",c),B.error("Failed to save content ideas"),c}},i=async(o,c)=>{try{const{error:l}=await H.from("content_ideas").update({script_status:c}).eq("id",o);if(l)throw l;e(u=>u.map(f=>f.id===o?{...f,script_status:c}:f))}catch(l){console.error("Error updating script status:",l),B.error("Failed to update script status")}};return m.useEffect(()=>{n()},[]),{contentIdeas:r,loading:t,saveContentIdeas:a,updateScriptStatus:i,refetch:n}};var Em={};const Re=Em.REACT_APP_BACKEND_URL,Sm=()=>{const[r,e]=m.useState([]),[t,s]=m.useState([]),[n,a]=m.useState([]),[i,o]=m.useState([]),[c,l]=m.useState(null),[u,f]=m.useState(!0),h=async()=>{try{const O=await fetch(`${Re}/api/video/templates`);if(!O.ok)throw new Error("Failed to fetch templates");const R=await O.json();s(R)}catch(O){console.error("Error fetching templates:",O),s([{id:"minimal",name:"Minimal Clean",style:"Clean typography, subtle animations",description:"Simple and professional with fade transitions"},{id:"scientific",name:"Scientific",style:"Diagrams, charts, professional",description:"Technical and educational with wipe transitions"},{id:"storytelling",name:"Storytelling",style:"Cinematic, narrative flow",description:"Narrative-driven with crossfade transitions"},{id:"educational",name:"Educational",style:"Clear structure, highlights",description:"Learning-focused with slide transitions"}])}},v=async()=>{try{const O=await fetch(`${Re}/api/video/recent-renders?limit=5`);if(O.ok){const R=await O.json();a(R)}}catch(O){console.error("Error fetching recent renders:",O)}},w=async()=>{try{const O=await fetch(`${Re}/api/video/batch/jobs?limit=10`);if(O.ok){const R=await O.json();o(R)}}catch(O){console.error("Error fetching batch jobs:",O)}},g=async()=>{try{const O=await fetch(`${Re}/api/video/batch/stats`);if(O.ok){const R=await O.json();l(R)}}catch(O){console.error("Error fetching batch stats:",O)}},p=async()=>{try{const O=[],R=localStorage.getItem("generated_scripts");R&&JSON.parse(R).forEach((C,q)=>{var W;O.push({id:`script_${q}`,type:"script",name:`${C.title||"Script"}.txt`,duration:C.duration||"5:00",size:`${Math.round((((W=C.content)==null?void 0:W.length)||0)/1024)} KB`,status:"ready",script_content:C.content,script_id:`script_${q}`})});const se=localStorage.getItem("generated_voices");se&&JSON.parse(se).forEach((C,q)=>{O.push({id:`voice_${q}`,type:"audio",name:`voice-${C.voice_id||"generated"}.mp3`,duration:C.duration||"5:00",size:"~3-8 MB",status:"ready",voice_generation_id:`voice_${q}`,audio_base64:C.audioContent})}),O.push({id:"default-bg-1",type:"background",name:"Professional Background",duration:"",size:"Generated",status:"ready"}),O.push({id:"default-music-1",type:"music",name:"Ambient Background",duration:"",size:"Generated",status:"ready"}),e(O)}catch(O){console.error("Error fetching media assets:",O),B.error("Failed to load media assets")}finally{f(!1)}},y=async(O,R,se,he)=>{try{const C=r.find(Ce=>R.includes(Ce.id)&&Ce.type==="script"),q=r.find(Ce=>R.includes(Ce.id)&&Ce.type==="audio");if(!C)throw new Error("Script is required for automated video creation");const W={script_content:C.script_content||"Default script content",voice_audio_base64:(q==null?void 0:q.audio_base64)||null,template_id:O,quality:se,background_config:{frameRate:he},project_id:`project_${Date.now()}`},ne=await fetch(`${Re}/api/video/create-automated`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)});if(!ne.ok){const Ce=await ne.json();throw new Error(Ce.detail||"Failed to create video")}const F=await ne.json();B.success("Professional video creation started! Check the status below.");const ee=JSON.parse(localStorage.getItem("video_renders")||"[]");return ee.unshift(F),localStorage.setItem("video_renders",JSON.stringify(ee.slice(0,10))),await v(),F}catch(C){throw console.error("Error creating automated video:",C),B.error(C.message||"Failed to create video"),C}},b=async(O,R,se,he)=>{try{const C=r.find(ee=>R.includes(ee.id)&&ee.type==="script"),q=r.find(ee=>R.includes(ee.id)&&ee.type==="audio");if(!C)throw new Error("Script is required for batch video creation");const W={script_content:C.script_content||"Default script content",voice_audio_base64:(q==null?void 0:q.audio_base64)||null,template_id:O,quality:se,background_config:{frameRate:he},project_id:`batch_project_${Date.now()}`},ne=await fetch(`${Re}/api/video/batch/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)});if(!ne.ok){const ee=await ne.json();throw new Error(ee.detail||"Failed to submit batch job")}const F=await ne.json();return B.success("Batch video job submitted! Processing in background."),await w(),await g(),F.job_id}catch(C){throw console.error("Error creating batch video:",C),B.error(C.message||"Failed to submit batch job"),C}},x=async O=>{try{const R=O.map(C=>{const q=r.find(ne=>C.selectedAssets.includes(ne.id)&&ne.type==="script"),W=r.find(ne=>C.selectedAssets.includes(ne.id)&&ne.type==="audio");return{script_content:(q==null?void 0:q.script_content)||"Default script content",voice_audio_base64:(W==null?void 0:W.audio_base64)||null,template_id:C.templateId,quality:C.quality,background_config:{frameRate:C.frameRate},project_id:`multi_batch_project_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}),se=await fetch(`${Re}/api/video/batch/submit-multiple`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(!se.ok){const C=await se.json();throw new Error(C.detail||"Failed to submit multiple batch jobs")}const he=await se.json();return B.success(`${he.total_jobs} batch video jobs submitted! Processing in background.`),await w(),await g(),he.job_ids}catch(R){throw console.error("Error creating multiple batch videos:",R),B.error(R.message||"Failed to submit multiple batch jobs"),R}},T=async O=>{try{const R=await fetch(`${Re}/api/video/render-status/${O}`);if(!R.ok)throw new Error("Failed to fetch render status");return await R.json()}catch(R){throw console.error("Error fetching render status:",R),R}},E=async O=>{try{const R=await fetch(`${Re}/api/video/batch/status/${O}`);if(!R.ok)throw new Error("Failed to fetch batch job status");return await R.json()}catch(R){throw console.error("Error fetching batch job status:",R),R}},V=async O=>{try{return(await fetch(`${Re}/api/video/batch/cancel/${O}`,{method:"POST"})).ok?(B.success("Batch job cancelled successfully"),await w(),await g(),!0):!1}catch(R){return console.error("Error cancelling batch job:",R),B.error("Failed to cancel batch job"),!1}},de=async O=>{try{const R=await fetch(`${Re}/api/video/batch/retry/${O}`,{method:"POST"});if(R.ok){const se=await R.json();return B.success("Batch job retry submitted successfully"),await w(),await g(),se.new_job_id}return null}catch(R){return console.error("Error retrying batch job:",R),B.error("Failed to retry batch job"),null}},K=O=>`${Re}/api/video/download/${O}`,ue=O=>`${Re}/api/video/preview/${O}`;return m.useEffect(()=>{(async()=>{await Promise.all([h(),p(),v(),w(),g()])})();const R=setInterval(async()=>{await w(),await g()},5e3);return()=>clearInterval(R)},[]),{mediaAssets:r,templates:t,recentRenders:n,batchJobs:i,batchStats:c,loading:u,createAutomatedVideo:y,createBatchVideo:b,createMultipleBatchVideos:x,getRenderStatus:T,getBatchJobStatus:E,cancelBatchJob:V,retryBatchJob:de,getDownloadUrl:K,getPreviewUrl:ue,refetch:p,refreshRenders:v,refreshBatchJobs:w,refreshBatchStats:g}},Ga=()=>{const{currentJob:r,updateJobProgress:e,settings:t}=Io(),{generateContentIdeas:s,generateScript:n,generateVoice:a}=km(),{contentIdeas:i,saveContentIdeas:o,updateScriptStatus:c,refetch:l}=Tm(),{createVideo:u}=Sm();m.useEffect(()=>{if(!r||r.status!=="running")return;(async()=>{try{switch(console.log("Processing automation job:",r),r.job_type){case"full_pipeline":await f();break;case"generate_content_ideas":await h();break;case"generate_script":await v();break;case"voice_synthesis":await w();break;case"video_assembly":await g();break;default:throw new Error(`Unknown job type: ${r.job_type}`)}}catch(y){console.error("Job processing error:",y),await e(r.id,"failed","Job failed",void 0,y.message),B.error(`Automation failed: ${y.message}`)}})()},[r]);const f=async()=>{if(!r||!t)return;const p=[];let y=0;t.auto_generate_ideas&&p.push("content_ideas"),t.auto_generate_scripts&&p.push("script_generation"),t.auto_generate_voice&&p.push("voice_synthesis"),t.auto_assemble_videos&&p.push("video_assembly"),t.auto_upload_youtube&&p.push("youtube_upload");const b=p.length;if(console.log("Running full pipeline with steps:",p),t.auto_generate_ideas){y++,await e(r.id,"running","Generating content ideas...",Math.round(y/b*100)),console.log("Generating content ideas...");const x=await s("Educational Content","General audience","Create engaging educational videos");if(x.contentIdeas&&Array.isArray(x.contentIdeas)){const T=x.contentIdeas.slice(0,3).map(E=>({title:E.title,category:"Educational Content",difficulty:E.difficulty||"Intermediate",estimated_views:E.estimatedViews||"10K-20K",competition:E.competition||"Medium",keywords:E.keywords||[],description:E.description||"",script_status:"not_generated"}));await o(T),await l(),console.log("Content ideas generated and saved:",T.length)}}if(t.auto_generate_scripts){y++,await e(r.id,"running","Generating script...",Math.round(y/b*100)),await new Promise(T=>setTimeout(T,2e3)),await l();const x=i.filter(T=>T.script_status==="not_generated");if(x.length>0){const T=x[0];console.log("Generating script for idea:",T.title),await c(T.id,"generating");try{(await n(T.title,"5-10 minutes","Educational","General audience",T.description)).script&&(await c(T.id,"generated"),console.log("Script generated successfully"))}catch(E){throw console.error("Script generation failed:",E),await c(T.id,"failed"),E}}else console.log("No content ideas available for script generation")}if(t.auto_generate_voice&&(y++,await e(r.id,"running","Synthesizing voice...",Math.round(y/b*100)),console.log("Voice synthesis step - simulating voice generation..."),await new Promise(x=>setTimeout(x,3e3))),t.auto_assemble_videos){y++,await e(r.id,"running","Assembling video...",Math.round(y/b*100)),console.log("Video assembly step - creating video record...");try{await u("educational",[],"1080p","30fps"),console.log("Video assembly completed")}catch(x){console.error("Video assembly failed:",x)}}t.auto_upload_youtube&&(y++,await e(r.id,"running","Uploading to YouTube...",Math.round(y/b*100)),console.log("YouTube upload step - simulating upload..."),await new Promise(x=>setTimeout(x,4e3))),await e(r.id,"completed","Pipeline completed successfully",100),B.success("Automation pipeline completed successfully!"),console.log("Full pipeline completed successfully")},h=async()=>{if(!r)return;await e(r.id,"running","Generating content ideas...",50);const p=await s("Educational Content","General audience","Create engaging educational videos");if(p.contentIdeas&&Array.isArray(p.contentIdeas)){const y=p.contentIdeas.map(b=>({title:b.title,category:"Educational Content",difficulty:b.difficulty||"Intermediate",estimated_views:b.estimatedViews||"10K-20K",competition:b.competition||"Medium",keywords:b.keywords||[],description:b.description||"",script_status:"not_generated"}));await o(y),await e(r.id,"completed","Content ideas generated successfully",100),B.success("Content ideas generated successfully!")}else throw new Error("Failed to generate content ideas")},v=async()=>{if(!r)return;await e(r.id,"running","Generating script...",50);const p=i.find(y=>y.script_status==="not_generated"&&(!r.content_idea_id||y.id===r.content_idea_id));if(p)await c(p.id,"generating"),await new Promise(y=>setTimeout(y,3e3)),await c(p.id,"generated"),await e(r.id,"completed","Script generated successfully",100),B.success("Script generated successfully!");else throw new Error("No content ideas available for script generation")},w=async()=>{r&&(await e(r.id,"running","Synthesizing voice...",50),await new Promise(p=>setTimeout(p,4e3)),await e(r.id,"completed","Voice synthesis completed",100),B.success("Voice synthesis completed!"))},g=async()=>{r&&(await e(r.id,"running","Assembling video...",50),await new Promise(p=>setTimeout(p,5e3)),await e(r.id,"completed","Video assembly completed",100),B.success("Video assembly completed!"))};return null},_r=m.forwardRef(({className:r,type:e,...t},s)=>d.jsx("input",{type:e,className:le("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...t}));_r.displayName="Input";var jm="Label",Ho=m.forwardRef((r,e)=>d.jsx(Te.label,{...r,ref:e,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||((n=r.onMouseDown)==null||n.call(r,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Ho.displayName=jm;var Ko=Ho;const Cm=ks("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),xr=m.forwardRef(({className:r,...e},t)=>d.jsx(Ko,{ref:t,className:le(Cm(),r),...e}));xr.displayName=Ko.displayName;var Gn="Tabs",[Pm,jg]=On(Gn,[ci]),Go=ci(),[Rm,Wn]=Pm(Gn),Wo=m.forwardRef((r,e)=>{const{__scopeTabs:t,value:s,onValueChange:n,defaultValue:a,orientation:i="horizontal",dir:o,activationMode:c="automatic",...l}=r,u=Fc(o),[f,h]=ii({prop:s,onChange:n,defaultProp:a});return d.jsx(Rm,{scope:t,baseId:Bc(),value:f,onValueChange:h,orientation:i,dir:u,activationMode:c,children:d.jsx(Te.div,{dir:u,"data-orientation":i,...l,ref:e})})});Wo.displayName=Gn;var Jo="TabsList",Qo=m.forwardRef((r,e)=>{const{__scopeTabs:t,loop:s=!0,...n}=r,a=Wn(Jo,t),i=Go(t);return d.jsx(Vc,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:s,children:d.jsx(Te.div,{role:"tablist","aria-orientation":a.orientation,...n,ref:e})})});Qo.displayName=Jo;var Yo="TabsTrigger",Xo=m.forwardRef((r,e)=>{const{__scopeTabs:t,value:s,disabled:n=!1,...a}=r,i=Wn(Yo,t),o=Go(t),c=rc(i.baseId,s),l=sc(i.baseId,s),u=s===i.value;return d.jsx(qc,{asChild:!0,...o,focusable:!n,active:u,children:d.jsx(Te.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":l,"data-state":u?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:c,...a,ref:e,onMouseDown:me(r.onMouseDown,f=>{!n&&f.button===0&&f.ctrlKey===!1?i.onValueChange(s):f.preventDefault()}),onKeyDown:me(r.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(s)}),onFocus:me(r.onFocus,()=>{const f=i.activationMode!=="manual";!u&&!n&&f&&i.onValueChange(s)})})})});Xo.displayName=Yo;var ec="TabsContent",tc=m.forwardRef((r,e)=>{const{__scopeTabs:t,value:s,forceMount:n,children:a,...i}=r,o=Wn(ec,t),c=rc(o.baseId,s),l=sc(o.baseId,s),u=s===o.value,f=m.useRef(u);return m.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),d.jsx(Nn,{present:n||u,children:({present:h})=>d.jsx(Te.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:l,tabIndex:0,...i,ref:e,style:{...r.style,animationDuration:f.current?"0s":void 0},children:h&&a})})});tc.displayName=ec;function rc(r,e){return`${r}-trigger-${e}`}function sc(r,e){return`${r}-content-${e}`}var Am=Wo,nc=Qo,ac=Xo,ic=tc;const Om=Am,oc=m.forwardRef(({className:r,...e},t)=>d.jsx(nc,{ref:t,className:le("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...e}));oc.displayName=nc.displayName;const Rn=m.forwardRef(({className:r,...e},t)=>d.jsx(ac,{ref:t,className:le("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...e}));Rn.displayName=ac.displayName;const An=m.forwardRef(({className:r,...e},t)=>d.jsx(ic,{ref:t,className:le("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...e}));An.displayName=ic.displayName;const Nm=()=>{const[r,e]=m.useState(""),[t,s]=m.useState(""),[n,a]=m.useState(!1),i=async c=>{c.preventDefault(),a(!0);try{const{error:l}=await H.auth.signUp({email:r,password:t});if(l)throw l;B.success("Check your email for the confirmation link!")}catch(l){B.error(l.message)}finally{a(!1)}},o=async c=>{c.preventDefault(),a(!0);try{const{error:l}=await H.auth.signInWithPassword({email:r,password:t});if(l)throw l;B.success("Welcome back!")}catch(l){B.error(l.message)}finally{a(!1)}};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900/20 to-blue-900/20 flex items-center justify-center p-4",children:d.jsxs(st,{className:"w-full max-w-md",children:[d.jsxs(nt,{className:"text-center",children:[d.jsx(bt,{className:"text-2xl bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:"YouTube Automation Studio"}),d.jsx("p",{className:"text-gray-400",children:"Sign in to access your automation tools"})]}),d.jsx(at,{children:d.jsxs(Om,{defaultValue:"signin",className:"w-full",children:[d.jsxs(oc,{className:"grid w-full grid-cols-2",children:[d.jsx(Rn,{value:"signin",children:"Sign In"}),d.jsx(Rn,{value:"signup",children:"Sign Up"})]}),d.jsx(An,{value:"signin",className:"space-y-4",children:d.jsxs("form",{onSubmit:o,className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(xr,{htmlFor:"email",children:"Email"}),d.jsxs("div",{className:"relative",children:[d.jsx(ua,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),d.jsx(_r,{id:"email",type:"email",placeholder:"Enter your email",value:r,onChange:c=>e(c.target.value),className:"pl-10",required:!0})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(xr,{htmlFor:"password",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx(la,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),d.jsx(_r,{id:"password",type:"password",placeholder:"Enter your password",value:t,onChange:c=>s(c.target.value),className:"pl-10",required:!0})]})]}),d.jsx(Je,{type:"submit",className:"w-full",disabled:n,children:n?"Signing in...":"Sign In"})]})}),d.jsx(An,{value:"signup",className:"space-y-4",children:d.jsxs("form",{onSubmit:i,className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(xr,{htmlFor:"signup-email",children:"Email"}),d.jsxs("div",{className:"relative",children:[d.jsx(ua,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),d.jsx(_r,{id:"signup-email",type:"email",placeholder:"Enter your email",value:r,onChange:c=>e(c.target.value),className:"pl-10",required:!0})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(xr,{htmlFor:"signup-password",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx(la,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),d.jsx(_r,{id:"signup-password",type:"password",placeholder:"Create a password",value:t,onChange:c=>s(c.target.value),className:"pl-10",required:!0})]})]}),d.jsx(Je,{type:"submit",className:"w-full",disabled:n,children:n?"Creating account...":"Sign Up"})]})})]})})]})})},Im=ks("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function cc({className:r,variant:e,...t}){return d.jsx("div",{className:le(Im({variant:e}),r),...t})}const $m=({user:r,settings:e,currentJob:t,onSignOut:s,onToggleAutomation:n,onOpenConfig:a})=>{var o;const i=(e==null?void 0:e.is_enabled)&&(t==null?void 0:t.status)==="running";return d.jsxs("header",{className:"flex items-center justify-between mb-6",children:[d.jsxs("div",{children:[d.jsxs("h1",{className:"text-2xl font-bold text-white mb-2",children:["Welcome back, ",((o=r==null?void 0:r.email)==null?void 0:o.split("@")[0])||"Creator","!"]}),d.jsxs("p",{className:"text-gray-400",role:"status","aria-live":"polite",children:["Your YouTube automation is ",i?"running":"paused"]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(cc,{variant:i?"default":"secondary",children:i?d.jsxs(d.Fragment,{children:[d.jsx(Ai,{className:"h-3 w-3 mr-1 animate-spin"}),"Running"]}):"Paused"}),d.jsx(Je,{onClick:n,variant:i?"destructive":"default",size:"sm",disabled:!e,"aria-label":i?"Pause automation":"Start automation",children:i?d.jsxs(d.Fragment,{children:[d.jsx(Al,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Pause"]}):d.jsxs(d.Fragment,{children:[d.jsx(os,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Start"]})})]}),d.jsxs(Je,{onClick:a,variant:"outline",size:"sm",children:[d.jsx(Nl,{className:"h-4 w-4 mr-2"}),"Settings"]}),d.jsxs(Je,{onClick:s,variant:"outline",size:"sm",children:[d.jsx(Cl,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})},Lm=[{id:"overview",label:"Overview",icon:d.jsx(cn,{className:"h-4 w-4"})},{id:"content",label:"Content Planning",icon:d.jsx(Tl,{className:"h-4 w-4"})},{id:"script",label:"Script Generator",icon:d.jsx(jl,{className:"h-4 w-4"})},{id:"voice",label:"Voice Studio",icon:d.jsx(Rl,{className:"h-4 w-4"})},{id:"video",label:"Video Assembly",icon:d.jsx(Ml,{className:"h-4 w-4"})},{id:"analytics",label:"Analytics",icon:d.jsx(cn,{className:"h-4 w-4"})},{id:"automation",label:"Automation",icon:d.jsx(Oi,{className:"h-4 w-4"})}],Dm=({activeTab:r,onTabChange:e})=>d.jsx("nav",{className:"flex flex-wrap gap-2 mb-6 p-1 bg-gray-800/30 rounded-lg",role:"tablist","aria-label":"Dashboard navigation",children:Lm.map(t=>d.jsxs(Je,{variant:r===t.id?"default":"ghost",size:"sm",onClick:()=>e(t.id),role:"tab","aria-selected":r===t.id,"aria-controls":`tabpanel-${t.id}`,tabIndex:r===t.id?0:-1,className:`flex items-center gap-2 ${r===t.id?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:[t.icon,d.jsx("span",{className:"hidden sm:inline",children:t.label})]},t.id))}),Mm=({stats:r,loading:e=!1})=>e?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[1,2,3,4].map(t=>d.jsxs(st,{className:"bg-gray-800/50 border-gray-700",children:[d.jsx(nt,{className:"pb-2",children:d.jsx("div",{className:"h-4 bg-gray-700 rounded animate-pulse"})}),d.jsxs(at,{children:[d.jsx("div",{className:"h-8 bg-gray-700 rounded animate-pulse mb-2"}),d.jsx("div",{className:"h-3 bg-gray-700 rounded animate-pulse w-16"})]})]},t))}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:r.map((t,s)=>d.jsxs(st,{className:"bg-gray-800/50 border-gray-700 hover:bg-gray-800/70 transition-colors",children:[d.jsxs(nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[d.jsx(bt,{className:"text-sm font-medium text-gray-400",children:t.label}),d.jsx(cn,{className:"h-4 w-4 text-gray-400"})]}),d.jsxs(at,{children:[d.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:t.value}),d.jsxs("div",{className:"flex items-center text-xs",children:[d.jsx($l,{className:"h-3 w-3 text-green-500 mr-1"}),d.jsx("span",{className:"text-green-500",children:t.change}),d.jsx("span",{className:"text-gray-400 ml-1",children:"from last month"})]})]})]},s))}),Um=({videos:r,loading:e=!1,onUploadVideo:t})=>{if(e)return d.jsxs(st,{className:"bg-gray-800/50 border-gray-700",children:[d.jsx(nt,{children:d.jsx(bt,{className:"text-white",children:"Recent Videos"})}),d.jsx(at,{children:d.jsx("div",{className:"space-y-4",children:[1,2,3].map(n=>d.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-700/30 rounded-lg",children:[d.jsx("div",{className:"w-20 h-12 bg-gray-600 rounded animate-pulse"}),d.jsxs("div",{className:"flex-1 space-y-2",children:[d.jsx("div",{className:"h-4 bg-gray-600 rounded animate-pulse"}),d.jsx("div",{className:"h-3 bg-gray-600 rounded animate-pulse w-24"})]})]},n))})})]});const s=r.slice(0,5);return d.jsxs(st,{className:"bg-gray-800/50 border-gray-700",children:[d.jsx(nt,{children:d.jsxs(bt,{className:"text-white flex items-center gap-2",children:[d.jsx(os,{className:"h-5 w-5"}),"Recent Videos"]})}),d.jsx(at,{children:s.length===0?d.jsxs("div",{className:"text-center py-8 text-gray-400",children:[d.jsx(os,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),d.jsx("p",{children:"No videos generated yet"}),d.jsx("p",{className:"text-sm",children:"Start the automation to create your first video!"})]}):d.jsx("div",{className:"space-y-4",children:s.map(n=>d.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-700/30 rounded-lg hover:bg-gray-700/50 transition-colors",children:[d.jsx("div",{className:"w-20 h-12 bg-gray-600 rounded overflow-hidden flex-shrink-0",children:n.thumbnail_url?d.jsx("img",{src:n.thumbnail_url,alt:n.title,className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsx(os,{className:"h-6 w-6 text-gray-400"})})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"text-white font-medium truncate mb-1",children:n.title}),d.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(Sl,{className:"h-3 w-3"}),n.views.toLocaleString()]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(Il,{className:"h-3 w-3"}),n.likes.toLocaleString()]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(Pl,{className:"h-3 w-3"}),n.comments.toLocaleString()]})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(cc,{variant:n.status==="published"?"default":n.status==="processing"?"secondary":"outline",children:n.status}),n.status==="ready"&&t&&d.jsxs(Je,{size:"sm",variant:"outline",onClick:()=>t(n.id),children:[d.jsx(Dl,{className:"h-3 w-3 mr-1"}),"Upload"]})]})]},n.id))})})]})};function Fm(r,e=[]){let t=[];function s(a,i){const o=m.createContext(i),c=t.length;t=[...t,i];function l(f){const{scope:h,children:v,...w}=f,g=(h==null?void 0:h[r][c])||o,p=m.useMemo(()=>w,Object.values(w));return d.jsx(g.Provider,{value:p,children:v})}function u(f,h){const v=(h==null?void 0:h[r][c])||o,w=m.useContext(v);if(w)return w;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${a}\``)}return l.displayName=a+"Provider",[l,u]}const n=()=>{const a=t.map(i=>m.createContext(i));return function(o){const c=(o==null?void 0:o[r])||a;return m.useMemo(()=>({[`__scope${r}`]:{...o,[r]:c}}),[o,c])}};return n.scopeName=r,[s,Bm(n,...e)]}function Bm(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const s=r.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(a){const i=s.reduce((o,{useScope:c,scopeName:l})=>{const f=c(a)[`__scope${l}`];return{...o,...f}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return t.scopeName=e.scopeName,t}var Jn="Progress",Qn=100,[Vm,Cg]=Fm(Jn),[qm,zm]=Vm(Jn),lc=m.forwardRef((r,e)=>{const{__scopeProgress:t,value:s=null,max:n,getValueLabel:a=Zm,...i}=r;(n||n===0)&&!Wa(n)&&console.error(Hm(`${n}`,"Progress"));const o=Wa(n)?n:Qn;s!==null&&!Ja(s,o)&&console.error(Km(`${s}`,"Progress"));const c=Ja(s,o)?s:null,l=_s(c)?a(c,o):void 0;return d.jsx(qm,{scope:t,value:c,max:o,children:d.jsx(Te.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":_s(c)?c:void 0,"aria-valuetext":l,role:"progressbar","data-state":hc(c,o),"data-value":c??void 0,"data-max":o,...i,ref:e})})});lc.displayName=Jn;var uc="ProgressIndicator",dc=m.forwardRef((r,e)=>{const{__scopeProgress:t,...s}=r,n=zm(uc,t);return d.jsx(Te.div,{"data-state":hc(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...s,ref:e})});dc.displayName=uc;function Zm(r,e){return`${Math.round(r/e*100)}%`}function hc(r,e){return r==null?"indeterminate":r===e?"complete":"loading"}function _s(r){return typeof r=="number"}function Wa(r){return _s(r)&&!isNaN(r)&&r>0}function Ja(r,e){return _s(r)&&!isNaN(r)&&r<=e&&r>=0}function Hm(r,e){return`Invalid prop \`max\` of value \`${r}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Qn}\`.`}function Km(r,e){return`Invalid prop \`value\` of value \`${r}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Qn} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var fc=lc,Gm=dc;const pc=m.forwardRef(({className:r,value:e,...t},s)=>d.jsx(fc,{ref:s,className:le("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...t,children:d.jsx(Gm,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));pc.displayName=fc.displayName;const Wm=({stats:r,videos:e,currentJob:t,videosLoading:s,analyticsLoading:n,onUploadVideo:a})=>d.jsxs("div",{className:"space-y-6",children:[d.jsx(Mm,{stats:r,loading:n}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsx("div",{className:"lg:col-span-2",children:d.jsx(Um,{videos:e,loading:s,onUploadVideo:a})}),d.jsxs("div",{className:"space-y-6",children:[t&&d.jsxs(st,{className:"bg-gray-800/50 border-gray-700",children:[d.jsx(nt,{children:d.jsxs(bt,{className:"text-white flex items-center gap-2",children:[d.jsx(Oi,{className:"h-5 w-5"}),"Automation Progress"]})}),d.jsxs(at,{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-2",children:[d.jsx("span",{children:t.current_step||"Initializing..."}),d.jsxs("span",{children:[t.progress,"%"]})]}),d.jsx(pc,{value:t.progress,className:"h-2"})]}),d.jsxs("div",{className:"text-xs text-gray-400",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx(El,{className:"h-3 w-3"}),"Status: ",t.status]}),t.started_at&&d.jsxs("div",{children:["Started: ",new Date(t.started_at).toLocaleTimeString()]})]})]})]}),d.jsxs(st,{className:"bg-gray-800/50 border-gray-700",children:[d.jsx(nt,{children:d.jsx(bt,{className:"text-white",children:"Quick Actions"})}),d.jsx(at,{className:"space-y-3",children:d.jsxs("div",{className:"text-sm text-gray-400",children:[d.jsxs("p",{children:[" Content ideas generated: ",e.length]}),d.jsxs("p",{children:[" Videos published: ",e.filter(i=>i.status==="published").length]}),d.jsxs("p",{children:[" Total revenue: $",e.reduce((i,o)=>i+o.revenue,0).toFixed(2)]})]})})]})]})]})]}),Jm=({href:r,children:e})=>d.jsx("a",{href:r,className:"sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:z-50 focus:px-4 focus:py-2 focus:bg-blue-600 focus:text-white focus:rounded focus:outline-none focus:ring-2 focus:ring-blue-400",children:e}),Qm=()=>{const[r,e]=m.useState([]),[t,s]=m.useState(!0),n=async()=>{try{const{data:{user:i}}=await H.auth.getUser();if(!i)return;const{data:o,error:c}=await H.from("videos").select("*").order("created_at",{ascending:!1});if(c)throw c;e(o||[])}catch(i){console.error("Error fetching videos:",i),B.error("Failed to load videos")}finally{s(!1)}},a=async i=>{try{const{data:{user:o}}=await H.auth.getUser();if(!o)throw new Error("User not authenticated");const{data:c,error:l}=await H.from("videos").insert([{...i,user_id:o.id}]).select().single();if(l)throw l;if(c)return e(u=>[c,...u]),c}catch(o){throw console.error("Error creating video:",o),B.error("Failed to create video"),o}};return m.useEffect(()=>{n()},[]),{videos:r,loading:t,createVideo:a,refetch:n}},Ym=()=>{const[r,e]=m.useState([]),[t,s]=m.useState(!0),n=async()=>{try{const{data:{user:i}}=await H.auth.getUser();if(!i)return;const{data:o,error:c}=await H.from("channel_analytics").select("*").order("date",{ascending:!1}).limit(30);if(c)throw c;e(o||[])}catch(i){console.error("Error fetching analytics:",i),B.error("Failed to load analytics")}finally{s(!1)}},a=async i=>{try{const{data:{user:o}}=await H.auth.getUser();if(!o)throw new Error("User not authenticated");const{data:c,error:l}=await H.from("channel_analytics").upsert([{...i,user_id:o.id}]).select().single();if(l)throw l;c&&e(u=>{const f=u.filter(h=>h.date!==c.date);return[c,...f].sort((h,v)=>new Date(v.date).getTime()-new Date(h.date).getTime())})}catch(o){throw console.error("Error updating analytics:",o),B.error("Failed to update analytics"),o}};return m.useEffect(()=>{n()},[]),{analytics:r,loading:t,updateAnalytics:a,refetch:n}},Qa=({size:r="md",text:e})=>{const t={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"};return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900/20 to-blue-900/20 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx(Ai,{className:`${t[r]} animate-spin text-blue-400 mx-auto`}),e&&d.jsx("p",{className:"mt-4 text-gray-400 text-sm",children:e})]})})},Xm=m.lazy(()=>qe(()=>import("./ContentPlanner-BMtfZzbk.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(r=>({default:r.ContentPlanner}))),eg=m.lazy(()=>qe(()=>import("./ScriptGenerator-HlTHQZSv.js"),__vite__mapDeps([8,1,2,3,4,5,9,10,7])).then(r=>({default:r.ScriptGenerator}))),tg=m.lazy(()=>qe(()=>import("./VoiceStudio-BONGjn8x.js"),__vite__mapDeps([11,1,2,3,4,9,12,10,7])).then(r=>({default:r.VoiceStudio}))),rg=m.lazy(()=>qe(()=>import("./VideoAssembly-CgMVKs69.js"),__vite__mapDeps([13,1,2,4,10,12,7])).then(r=>({default:r.VideoAssembly}))),sg=m.lazy(()=>qe(()=>import("./AnalyticsDashboard-3dXYJRjh.js"),__vite__mapDeps([14,1,2,7,5])).then(r=>({default:r.AnalyticsDashboard}))),ng=m.lazy(()=>qe(()=>import("./AutomationConfig-CfCg1zDo.js"),__vite__mapDeps([15,1,2,4,3,5,6,7])).then(r=>({default:r.AutomationConfig}))),ag=()=>{const[r,e]=m.useState("overview"),[t,s]=m.useState(!1),{user:n,loading:a,signOut:i}=Zo(),{videos:o,loading:c}=Qm(),{analytics:l,loading:u}=Ym(),{settings:f,currentJob:h,startAutomation:v,pauseAutomation:w}=Io(),g=async()=>{f&&(f.is_enabled&&(h==null?void 0:h.status)==="running"?await w():await v())},p=[{label:"Videos Generated",value:o.length.toString(),change:"+12%"},{label:"Total Views",value:o.reduce((b,x)=>b+x.views,0).toLocaleString(),change:"+8.5%"},{label:"Revenue",value:`$${o.reduce((b,x)=>b+x.revenue,0).toFixed(2)}`,change:"+15%"},{label:"Active Videos",value:o.filter(b=>b.status==="published").length.toString(),change:"+23%"}],y=()=>{const b=({children:x})=>d.jsx(m.Suspense,{fallback:d.jsx(Qa,{size:"sm",text:"Loading component..."}),children:x});switch(r){case"content":return d.jsx(b,{children:d.jsx(Xm,{})});case"script":return d.jsx(b,{children:d.jsx(eg,{})});case"voice":return d.jsx(b,{children:d.jsx(tg,{})});case"video":return d.jsx(b,{children:d.jsx(rg,{})});case"analytics":return d.jsx(b,{children:d.jsx(sg,{})});case"automation":return d.jsx(Ga,{});case"overview":default:return d.jsx(Wm,{stats:p,videos:o,currentJob:h,videosLoading:c,analyticsLoading:u})}};return a?d.jsx(Qa,{text:"Loading your dashboard..."}):n?d.jsx(co,{children:d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900/20 to-blue-900/20",children:[d.jsx(Jm,{href:"#main-content",children:"Skip to main content"}),d.jsx(Ga,{}),d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsx($m,{user:n,settings:f,currentJob:h,onSignOut:i,onToggleAutomation:g,onOpenConfig:()=>s(!0)}),d.jsx(Dm,{activeTab:r,onTabChange:e}),d.jsx("main",{id:"main-content",className:"animate-fade-in",role:"tabpanel","aria-labelledby":`tab-${r}`,children:y()})]}),d.jsx(m.Suspense,{fallback:null,children:d.jsx(ng,{open:t,onOpenChange:s})})]})}):d.jsx(Nm,{})},ig=()=>{const r=oo();return m.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",r.pathname)},[r.pathname]),d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),d.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),d.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},og=new nd,cg=()=>d.jsx(co,{children:d.jsx(id,{client:og,children:d.jsxs($u,{children:[d.jsx(ql,{}),d.jsx(yu,{}),d.jsx(zd,{children:d.jsxs(Bd,{children:[d.jsx(pn,{path:"/",element:d.jsx(ag,{})}),d.jsx(pn,{path:"*",element:d.jsx(ig,{})})]})})]})})});ui(document.getElementById("root")).render(d.jsx(cg,{}));export{Je as B,st as C,Sl as E,jl as F,_r as I,B as J,Ai as L,Rl as M,pc as P,Nl as S,$l as T,Dl as U,Ml as V,Ul as X,Oi as Z,Tm as a,nt as b,ce as c,bt as d,at as e,cc as f,Tl as g,El as h,le as i,Al as j,os as k,Sm as l,Io as m,Hd as n,xr as o,Ts as p,km as u};
